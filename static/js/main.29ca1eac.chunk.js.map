{"version":3,"sources":["math/display.js","components/ControlBar/Equation/Term/Term.js","components/ControlBar/Equation/Equation.js","components/ControlBar/ControlBar.js","components/DisplayEquation.js","components/InfoPanel/InfoCard.js","components/InfoPanel/cards/Reduction.js","components/InfoPanel/cards/GroupStructure.js","components/InfoPanel/InfoPanel.js","math/analysis.js","math/graphics.js","components/MainView/scene.js","components/MainView/transitions.js","components/MainView/render.js","components/MainView/MainView.js","math/bigRational.js","math/affineMap.js","math/numberTheory.js","math/reduce.js","math/rationalPoint.js","math/curve.js","App.js","serviceWorker.js","index.js"],"names":["renderCoefficient","n","hideUnit","arguments","length","undefined","first","sign","lt","bigInt","zero","minus","eq","renderTerm","monomial","_renderCoefficient","_renderCoefficient2","Object","slicedToArray","coefficient","join","renderPolynomial","coefficients","monomials","terms","i","term","push","Term","e","delta","deltaY","this","props","setCoefficient","add","classes","react_default","a","createElement","className","onWheel","handleWheel","bind","react_katex","PureComponent","affine_monomials","homogeneous_monomials","Equation","v","Equation_Term_Term","key","getCoefficientSetter","homogeneous","concat","renderTerms","ControlBar","AppBar_default","appBar","Toolbar_default","controlBar","disableGutters","IconButton_default","onClick","handleMenuButton","Menu_default","ControlBar_Equation_Equation","curve","view3D","Switch_default","checked","onChange","handle3DSwitch","color","withStyles","zIndex","backgroundColor","flexDirection","DisplayEquation","latex","children","map","toString","x","style","fontSize","overflowX","overflowY","width","whiteSpace","math","InfoCard","Card_default","CardContent_default","Typography_default","variant","component","gutterBottom","title","ExpansionPanel","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","expanded","setState","buttonContainer","spacer","expandButton","expandOpen","expandClosed","toggleOpen","ExpandMore_default","Collapse_default","in","S_ExpansionPanel","theme","transition","transitions","create","duration","short","transform","display","flexGrow","Reduction","reduced","curve_basis","_reduced$coefficients","b","map_basis","multiplier","denominator","discriminant","factorization","output","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_ref","value","_ref2","k","err","return","renderFactorization","discriminantFactorization","components_InfoPanel_InfoCard","components_DisplayEquation","slice","displayPoint","point","inverseMap","isIdentity","_inverseMap$transform","transformBigRational","y","_inverseMap$transform2","GroupStructure","torsionPoints","inverse","order","p","sort","group","orders","Z","cyclic","includes","console","log","renderTorsionPoints","InfoPanel","Drawer_default","open","infoPanel","paper","infoPanelPaper","toolbar","cards_Reduction","cards_GroupStructure","maxWidth","mixins","withTheme","findRoots","Math","cbrt","pow","roots","alpha","sqrt","beta","acos","cos","PI","SEGMENTS","INFINITY","affineCurveGeometry","_curve$map","toJSNumber","_curve$map2","f","isNaN","xLists","multiComponent","shift","extremum","root","local_scale","max","abs","points","sinh","componentSize","pointsA","omegaA","radiusA","centerA","multiplierB","pointsB","apply","affineCurvePoints","xList","yList","reversePoints","reverse","_i","_output","X","Y","transformFloat","array","Float32Array","pushPoints","z","norm","curveSurfaceGeometry","affinePoints","index","loopPoints","nPoints","mainPoints","offset","curr","last","orbitControls","scene","THREE","camera","window","innerWidth","innerHeight","curveLineMaterial","linewidth","curveLineGeoA","addAttribute","curveLineA","curveLineGeoB","curveLineB","axesMaterial","axesGeo","axes","position","setY","yAxisMaterial","transparent","opacity","yAxisGeo","yAxis","visible","curveSurfaceMaterial","side","curveSurfaceGeo","geoPoints","setIndex","curveSurface","planeMaterial","planeGeo","plane","rotateX","ambientLight","directionalLight","target","set","light","toggle3DList","EPSILON","cubicEase","cosineEase","start3DTransition","SCENE","enabled","now","Date","getTime","cameraTarget","clone","cameraPosition","sub","cameraDistance","initialQuaternion","quaternion","targetQuaternion","normalize","unshift","t","start","stop","radius","q0","q1","slerp","newPosition","applyQuaternion","copy","updateProjectionMatrix","orbitCameraTransition","shiftAxesTransition","material","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","obj","toggleSurfacesTransition","enableControlsTransition","targetTime","controls","enableRotate","enableDamping","mouseButtons","LEFT","RIGHT","renderer","initialized","handleResize","setSize","aspect","initialize","canvas","document","getElementById","antialias","logarithmicDepthBuffer","setPixelRatio","devicePixelRatio","addEventListener","initializeRenderer","OrbitControls","dampingFactor","rotateSpeed","screenSpacePanning","TRANS","animate","requestAnimationFrame","render","update","uxScale","scale","setScalar","running","pop","MainView","renderScene","newView3D","curveGeo","geoA","geometry","posA","attributes","geoB","posB","copyArray","needsUpdate","computeBoundingSphere","surfaceGeo","surfacePos","_curveSurfaceGeometry","_curveSurfaceGeometry2","computeVertexNormals","updateCurve","id","BigRational","numerator","d","reduce","gcd","divide","other","times","plus","negate","reciprocal","exponent","powers","answer","gt","AffineMap","_this$coefficients","c","_other$coefficients","A","B","C","D","E","F","_this$coefficients2","determinant","den","_this$coefficients$ma","_this$coefficients$ma2","_this$coefficients$ma3","_this$coefficients$ma4","_this$coefficients3","mapString","IdentityMap","functions","reduceFull","_curve","_curve2","_curve3","one","leq","isDivisibleBy","overallMap","_f","_f2","compose","small_primes","isProbablePrime","RationalPoint","reducedCurve","Number","NaN","getIdentity","slope","_this$curve$coefficie","_this$curve$coefficie2","intercept","quadratic","syntheticDivide","substitute","Infinity","remainder","Curve","_len","Array","_key","computeReduction","computeTorsionPoints","_reduceFull","_reduceFull2","ReducedCurve","_getPrototypeOf2","toConsumableArray","_small_primes","prime","factor","_this2","computeDiscriminant","candidates","getCandidateTorsionPoints","construct","isFinite","yCandidates","currentCandidates","_loop","_yCandidates","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","round","_this$coefficients4","App","infoPanelOpen","helpPanelOpen","components_ControlBar_ControlBar","toggleInfoPanel","handleHelpButton","toggleHelpPanel","toggle3DView","components_InfoPanel_InfoPanel","components_MainView_MainView","Boolean","location","hostname","match","ReactDOM","src_App_0","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.29ca1eac.chunk.js","sourcesContent":["import bigInt from 'big-integer';\n\n\nfunction renderCoefficient(n, hideUnit=true, first=false) {\n\tvar sign = n.lt(0) ? '-' : '+';\n\n\tif (first && sign === '+') {\n\t\tsign = '';\n\t}\n\n\tif (n.lt(0)) {\n\t\tn = bigInt.zero.minus(n);\n\t}\n\n\tif (n.eq(1) && hideUnit) {\n\t\tn = '';\n\t}\n\n\treturn [sign, n];\n}\n\n\nfunction renderTerm(n, monomial='', first=false) {\n\tn = bigInt(n);\n\tconst [sign, coefficient] = renderCoefficient(\n\t\tn, (monomial !== ''), first);\n\n\tif (n.eq(0)) {\n\t\treturn '';\n\t} else {\n\t\treturn [sign, coefficient, monomial].join('');\n\t}\n}\n\nfunction renderPolynomial(coefficients, monomials, first=true) {\n\tconst terms = []\n\n\tfor (var i=0; i < coefficients.length; i++) {\n\t\tconst term = renderTerm(coefficients[i], monomials[i], first);\n\t\tif (term !== '') {\n\t\t\tterms.push(term);\n\t\t\tfirst = false;\n\t\t}\n\t}\n\treturn terms.join('');\n}\n\nfunction renderFactorization(factorization) {\n\tconst output = [];\n\t\n\tfor (var [k, v] of factorization) {\n\t\tif (v === 1) {\n\t\t\toutput.push(k);\n\t\t} else {\n\t\t\toutput.push(k + '^{' + v + '}');\n\t\t}\n\t}\n\n\treturn output.join('\\\\cdot');\n}\n\n\nexport {\n\trenderCoefficient,\n\trenderTerm,\n\trenderPolynomial,\n\trenderFactorization\n};\n","import React, {PureComponent} from 'react';\nimport {InlineMath} from 'react-katex';\n\nimport bigInt from 'big-integer';\n\nimport {renderCoefficient} from 'math/display.js';\n\n\nclass Term extends PureComponent {\n\thandleWheel(e) {\n\t\tconst delta = (e.deltaY > 0) ? bigInt(-1) : bigInt(1);\n\t\tthis.props.setCoefficient(this.props.coefficient.add(delta));\n\t}\n\n\trender() {\n\t\tconst [sign, coefficient] = renderCoefficient(\n\t\t\tthis.props.coefficient,\n\t\t\tthis.props.monomial !== '',\n\t\t\tthis.props.first\n\t\t);\n\n\n\t\tvar classes = 'equation-term';\n\t\tif (this.props.coefficient.eq(0)) {\n\t\t\tclasses += ' faded';\n\t\t}\n\t\treturn (\n\t\t\t<span\n\t\t\t\tclassName={classes}\n\t\t\t\tonWheel={this.handleWheel.bind(this)}\n\t\t\t>\n\t\t\t\t<InlineMath>\n\t\t\t\t\t{sign + '~' + coefficient + this.props.monomial}\n\t\t\t\t</InlineMath>\n\t\t\t</span>);\n\t}\n}\n\nexport default Term;\n","import React, {PureComponent} from 'react';\nimport {InlineMath} from 'react-katex';\n\nimport Term from './Term/Term.js';\nimport './Equation.css';\n\n\nconst affine_monomials = [\n\t'y^2', 'xy', 'y',\n\t'x^3', 'x^2', 'x', ''];\nconst homogeneous_monomials = [\n\t'y^2z', 'xyz', 'yz^2',\n\t'x^3', 'x^2z', 'xz^2', 'z^3'];\n\nclass Equation extends PureComponent {\n\tgetCoefficientSetter(i) {\n\t\treturn (function(v) {\n\t\t\tthis.props.setCoefficient(i, v);\n\t\t}).bind(this);\n\t}\n\n\trenderTerm(i, monomial) {\n\t\treturn (\n\t\t\t<Term\n\t\t\t\tkey={i}\n\t\t\t\tcoefficient={this.props.coefficients[i]}\n\t\t\t\tmonomial={monomial}\n\t\t\t\tsetCoefficient={this.getCoefficientSetter(i)}\n\t\t\t/>);\n\t}\n\n\trenderTerms() {\n\t\tconst monomials = this.props.homogeneous ? homogeneous_monomials : affine_monomials;\n\t\tconst terms = [\n\t\t\t<InlineMath key={-1}>{monomials[0]}</InlineMath>,\n\t\t\tthis.renderTerm(0, monomials[1]),\n\t\t\tthis.renderTerm(2, monomials[2]),\n\t\t\t<InlineMath key={-2}>{`~= ${monomials[3]}`}</InlineMath>,\n\t\t\tthis.renderTerm(1, monomials[4]),\n\t\t\tthis.renderTerm(3, monomials[5]),\n\t\t\tthis.renderTerm(4, monomials[6]),\n\t\t];\n\t\treturn terms;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className='main-equation'>\n\t\t\t\t\t{this.renderTerms()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Equation;\n","import React, {PureComponent} from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Switch from '@material-ui/core/Switch';\n//import Button from '@material-ui/core/Button';\n\n\nimport {withStyles} from '@material-ui/core/styles';\n\nimport Equation from './Equation/Equation.js';\nimport './ControlBar.css';\n\nconst styles = {\n\tappBar: {\n\t\tzIndex: 5000\n\t},\n\tcontrolBar: {\n\t\tbackgroundColor: 'white',\n\t\tcolor: 'black',\n\t\tflexDirection: 'row',\n\t}\n}\n\nclass ControlBar extends PureComponent {\n\trender() {\n\t\tconst classes = this.props.classes;\n\t\treturn (\n\t\t\t<AppBar className={classes.appBar}>\n\t\t\t\t<Toolbar\n\t\t\t\t\tclassName={classes.controlBar + ' control-bar'}\n\t\t\t\t\tdisableGutters\n\t\t\t\t>\n\t\t\t\t\t<IconButton onClick={this.props.handleMenuButton}>\n\t\t\t\t\t\t<MenuIcon/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<div className='spacer'/>\n\t\t\t\t\t<div className='equation-container'>\n\t\t\t\t\t\t<Equation\n\t\t\t\t\t\t\tcoefficients={this.props.curve.coefficients}\n\t\t\t\t\t\t\tsetCoefficient={this.props.setCoefficient}\n\t\t\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className='options'>\n\t\t\t\t\t\t2D\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={this.props.view3D}\n\t\t\t\t\t\t\tonChange={this.props.handle3DSwitch}\n\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t3D\n\t\t\t\t\t</span>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(ControlBar);\n","import React, {PureComponent} from 'react';\n\nimport {InlineMath} from 'react-katex';\n\n\nclass DisplayEquation extends PureComponent {\n\trender() {\n\t\tvar latex;\n\t\tif (typeof this.props.children.map === 'undefined') {\n\t\t\tlatex = this.props.children.toString();\n\t\t} else {\n\t\t\tlatex = this.props.children.map((x) => x.toString()).join('');\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName='display-equation'\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: this.props.fontSize,\n\t\t\t\t\toverflowX: 'auto',\n\t\t\t\t\toverflowY: 'hidden',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\twhiteSpace: 'nowrap'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<InlineMath math={latex}/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default DisplayEquation;\n","import React, {PureComponent} from 'react';\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\n\nimport {withStyles} from '@material-ui/core/styles';\n\nimport './InfoCard.css';\n\nconst styles = (theme) => ({\n\texpandButton: {\n\t\ttransition: theme.transitions.create('transform', {\n\t\t\tduration: theme.transitions.duration.short\n\t\t})\n\t},\n\texpandClosed: {\n\t\ttransform: 'rotate(0deg)',\n\t},\n\texpandOpen: {\n\t\ttransform: 'rotate(180deg)',\n\t},\n\n\tbuttonContainer: {\n\t\tdisplay: 'flex'\n\t},\n\tspacer: {\n\t\tflexGrow: 1\n\t}\n});\n\n\nclass InfoCard extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<Card className='info-card'>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant='h5' component='h2' gutterBottom>\n\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\nclass ExpansionPanel extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\n\ttoggleOpen() {\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\n\trender() {\n\t\tconst classes = this.props.classes;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={classes.buttonContainer}>\n\t\t\t\t\t<div className={classes.spacer}/>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclasses.expandButton\n\t\t\t\t\t\t\t+ ' ' + (this.state.expanded ?\n\t\t\t\t\t\t\tclasses.expandOpen : classes.expandClosed)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={this.toggleOpen.bind(this)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ExpandMoreIcon/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t\t<Collapse in={this.state.expanded}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Collapse>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst S_ExpansionPanel = withStyles(styles)(ExpansionPanel);\n\nexport default InfoCard;\nexport {S_ExpansionPanel as ExpansionPanel};\n","import React, {PureComponent} from 'react';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport DisplayEquation from 'components/DisplayEquation.js';\nimport {renderPolynomial, renderFactorization} from 'math/display.js';\n\nimport InfoCard, {ExpansionPanel} from '../InfoCard.js';\n\n\nclass Reduction extends PureComponent {\n\trender() {\n\t\tconst reduced = this.props.curve.reduced;\n\n\t\t/***** Render Curve *****/\n\t\tconst homogeneous = this.props.homogeneous;\n\t\tconst curve_basis = homogeneous ? ['X^3', 'XZ^2', 'Z^3'] : ['X^3', 'X', ''];\n\t\tconst [a, b] = reduced.coefficients;\n\n\t\t/***** Render Mapping *****/\n\t\tconst map = reduced.map;\n\t\tconst map_basis = homogeneous ? ['x', 'y', 'z'] : ['x', 'y', ''];\n\t\tconst multiplier = (map.denominator.eq(1))\n\t\t\t? '' : `\\\\frac{1}{${map.denominator}}`;\n\n\t\t/***** Render Discriminant *****/\n\t\tconst discriminant = reduced.discriminant;\n\t\tvar factorization = renderFactorization(\n\t\t\treduced.discriminantFactorization);\n\t\tif (discriminant.lt(0)) {\n\t\t\tfactorization = '-' + factorization;\n\t\t}\n\n\t\treturn (\n\t\t\t<InfoCard title='Reduced Form'>\n\t\t\t\t<DisplayEquation fontSize={28}>\n\t\t\t\t\t\t{homogeneous ? 'Y^2 Z' : 'Y^2'}\n\t\t\t\t\t\t=\n\t\t\t\t\t\t{renderPolynomial([1, a, b], curve_basis)}\n\t\t\t\t</DisplayEquation>\n\t\t\t\t<ExpansionPanel>\n\t\t\t\t\t<Typography variant='caption'>Mapping</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={20}>\n\t\t\t\t\t\t{homogeneous ? '[X:Y:Z]' : '(X, Y)'}\n\t\t\t\t\t\t=\n\t\t\t\t\t\t{multiplier + (homogeneous ? '[' : '(')}\n\t\t\t\t\t\t{renderPolynomial(\n\t\t\t\t\t\t\tmap.coefficients.slice(0, 3), map_basis)}\n\t\t\t\t\t\t{homogeneous ? ':' : ','}\n\t\t\t\t\t\t{renderPolynomial(\n\t\t\t\t\t\t\tmap.coefficients.slice(3, 6), map_basis)}\n\t\t\t\t\t\t{homogeneous ? ':z]' : ')'}\n\t\t\t\t\t</DisplayEquation>\n\n\t\t\t\t\t<Typography variant='caption'>Discriminant</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={20}>\n\t\t\t\t\t\t{'\\\\begin{aligned}'}\n\t\t\t\t\t\t\t\\Delta &=\n\t\t\t\t\t\t\t{discriminant}\n\t\t\t\t\t\t\t{discriminant.eq(0) ? ''\n\t\t\t\t\t\t\t\t\t: ('\\\\\\\\ &=' + factorization)}\n\t\t\t\t\t\t{'\\\\end{aligned}'}\n\t\t\t\t\t</DisplayEquation>\n\t\t\t\t</ExpansionPanel>\n\t\t\t</InfoCard>\n\t\t);\n\t}\n}\n\nexport default Reduction;\n","import React, {PureComponent} from 'react';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport DisplayEquation from 'components/DisplayEquation.js';\n\nimport InfoCard, {ExpansionPanel} from '../InfoCard.js';\n\n\nfunction displayPoint(point, inverseMap, homogeneous) {\n\tif (point.isIdentity()) {\n\t\treturn homogeneous ? '[0 : 1 : 0]' : '\\\\infty';\n\t}\n\n\tconst [x, y] = inverseMap.transformBigRational(point.x, point.y);\n\tif (homogeneous) {\n\t\treturn `[${x}:${y}:1]`;\n\t} else {\n\t\treturn `(${x}, ${y})`;\n\t}\n}\n\nclass GroupStructure extends PureComponent {\n\trenderTorsionPoints(torsionPoints) {\n\n\t\t// Render table\n\t\tconst inverseMap = this.props.curve.reduced.map.inverse();\n\t\tconst output = [];\n\t\tfor (var [point, order] of torsionPoints) {\n\t\t\toutput.push(\n\t\t\t\tdisplayPoint(point, inverseMap, this.props.homogeneous)\n\t\t\t\t+ ' & ' + order\n\t\t\t);\n\t\t}\n\n\t\tconst header = '\\\\begin{array}{ll} \\\\text{Point} & \\\\text{Order} \\\\\\\\{}';\n\t\tconst footer = '\\\\end{array}';\n\t\treturn header + output.join('\\\\\\\\{}') + footer;\n\t}\n\n\trender() {\n\t\tconst reduced = this.props.curve.reduced;\n\t\tif (reduced.discriminant.eq(0)) {\n\t\t\treturn (<div/>);\n\t\t}\n\n\t\t// Torsion subgroup\n\t\tconst order = reduced.torsionPoints.length;\n\t\tconst torsionPoints = this.props.curve.reduced.torsionPoints.map(\n\t\t\t(p) => [p, p.order()]\n\t\t);\n\t\ttorsionPoints.sort((a, b) => a[1] - b[1]);\n\t\tconst orders = torsionPoints.map((x) => x[1]);\n\n\t\tconst Z = '\\\\mathbb{Z}'\n\t\tconst cyclic = (n) => Z + '_{' + n + '}';\n\t\tvar group;\n\t\tif (order === 1) {\n\t\t\tgroup = Z + '^r';\n\t\t} else if ([2, 3, 5, 6, 7, 9].includes(order)) {\n\t\t\tgroup = cyclic(order);\n\t\t} else {\n\t\t\tconsole.log(orders, order);\n\t\t\tgroup = orders.includes(order)\n\t\t\t\t? cyclic(order)\n\t\t\t\t: '(' + cyclic(order/2) + '\\\\times' + cyclic(2) + ')';\n\t\t}\n\n\t\tif (order !== 1) {\n\t\t\tgroup += '\\\\times ' + Z + '^r';\n\t\t}\n\n\n\t\treturn (\n\t\t\t<InfoCard title='Group Structure'>\n\t\t\t\t<DisplayEquation fontSize={28}>\n\t\t\t\t\t{'E(\\\\mathbb{Q}) \\\\cong' + group}\n\t\t\t\t</DisplayEquation>\n\t\t\t\t<ExpansionPanel>\n\t\t\t\t\t<Typography variant='caption'>Torsion Points</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={18}>\n\t\t\t\t\t\t{this.renderTorsionPoints(torsionPoints)}\n\t\t\t\t\t</DisplayEquation>\n\t\t\t\t</ExpansionPanel>\n\t\t\t</InfoCard>\n\t\t);\n\t}\n}\n\nexport default GroupStructure;\n","import React, {PureComponent} from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport {withStyles} from '@material-ui/core/styles';\n\nimport Reduction from './cards/Reduction.js';\nimport GroupStructure from './cards/GroupStructure.js';\n\n\nconst styles = (theme) => ({\n\tinfoPanelPaper: {\n\t\tbackgroundColor: '#EEE',\n\t\twidth: 400,\n\t\tmaxWidth: '100%'\n\t},\n\ttoolbar: theme.mixins.toolbar\n});\n\nclass InfoPanel extends PureComponent {\n\trender() {\n\t\tconst classes = this.props.classes;\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\topen={this.props.open}\n\t\t\t\tvariant='persistent'\n\t\t\t\tclassName={classes.infoPanel}\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: classes.infoPanelPaper\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className={classes.toolbar}/>\n\t\t\t\t<Reduction\n\t\t\t\t\tcurve={this.props.curve}\n\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t/>\n\t\t\t\t<GroupStructure\n\t\t\t\t\tcurve={this.props.curve}\n\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t/>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, {withTheme: true})(InfoPanel);\n","/*\n * Finds the real roots of f(x) = x^3 + ax + b.\n */\nfunction findRoots(a, b) {\n\tif (a === 0) {\n\t\treturn [-Math.cbrt(b)];\n\t}\n\n\tconst discriminant = -16 * (4*Math.pow(a, 3) + 27*Math.pow(b, 2));\n\n\tif (discriminant === 0) {\n\t\t// Multiple root\n\t\tconst roots = [3*b/a, -3*b/(2*a)];\n\t\troots.sort((a, b) => a-b);\n\t\treturn roots;\n\t} else if (discriminant > 0) {\n\t\t// Three real roots\n\t\t// Viete's solution to the cubic\n\t\tconst alpha = Math.sqrt(-3/a);\n\t\tconst beta = Math.acos(3*b/(2*a) * alpha);\n\t\tconst roots = []\n\n\t\tfor (var k=0; k<3; k++) {\n\t\t\troots.push(2 * Math.cos(\n\t\t\t\t(beta - 2*Math.PI*k)/3\n\t\t\t) / alpha);\n\t\t}\n\t\troots.sort((a, b) => a-b);\n\t\treturn roots;\n\t} else {\n\t\t// One real root\n\t\t// Cardano's formula\n\t\tconst alpha = Math.sqrt(discriminant / (-16 * 4 * 27));\n\t\tconst root = Math.cbrt(-b/2 + alpha) + Math.cbrt(-b/2 - alpha);\n\t\treturn [root];\n\t}\n}\n\nexport {findRoots};\n","import {findRoots} from './analysis.js';\n\n\nconst SEGMENTS = 128;\nconst INFINITY = 1e5;\n\nfunction norm(x, z) {\n\treturn 1/Math.max(Math.abs(x), Math.abs(z), 1);\n}\n\nfunction affineCurvePoints(a, b) {\n\tconst roots = findRoots(a, b);\n\tconst f = (x) => Math.pow(x, 3) + a*x + b;\n\tvar multiComponent = true;\n\n\t// Expand double root to three (non-unique) roots\n\tif (roots.length === 2) {\n\t\tmultiComponent = false;\n\t\tconst x = (roots[0] + roots[1]) / 2;\n\t\tif (f(x) > 0) {\n\t\t\troots.push(roots[1]);\n\t\t} else {\n\t\t\troots.shift();\n\t\t}\n\t}\n\n\t// Expand single root if curve has local extrema\n\tif (roots.length === 1 && a < 0) {\n\t\tconst extremum = Math.sqrt(-a/3);\n\t\tif (f(extremum) > 0){\n\t\t\tmultiComponent = false;\n\t\t\troots.push(extremum, extremum);\n\t\t}\n\t}\n\n\tif (roots.length === 1) {\n\t\t// Single component\n\t\tconst root = roots[0];\n\t\tconst local_scale = Math.max(Math.abs(root), 1)/200;\n\t\tconst multiplier = 15/SEGMENTS;\n\n\t\tconst points = [];\n\t\tfor (var i = 0; i < SEGMENTS-1; i++) {\n\t\t\tpoints.push(root + local_scale * Math.sinh(i * multiplier));\n\t\t}\n\t\tpoints.push(INFINITY);\n\t\treturn [points];\n\t} else {\n\t\t// Choose array componentSizes for each component\n\t\t// Depending on whether curve itself is multi-component\n\t\tconst componentSize = multiComponent ? SEGMENTS : SEGMENTS/2;\n\n\t\t// First component\n\t\tconst pointsA = [roots[0]];\n\t\tconst omegaA = Math.PI / (componentSize-2);\n\t\tconst radiusA = (roots[1] - roots[0])/2;\n\t\tconst centerA = (roots[0] + roots[1])/2;\n\t\tfor (i = 0; i < componentSize-2; i++) {\n\t\t\tpointsA.push(\n\t\t\t\tcenterA - radiusA * \n\t\t\t\tMath.cos(i * omegaA)\n\t\t\t);\n\t\t}\n\t\tpointsA.push(roots[1]);\n\n\t\t// Second component\n\t\tconst local_scale = Math.max(Math.abs(roots[2] - roots[0]), 1)/200;\n\t\tconst multiplierB = 15/componentSize;\n\n\t\tconst pointsB = [];\n\t\tfor (i = 0; i < componentSize-1; i++) {\n\t\t\tpointsB.push(roots[2]\n\t\t\t\t+ local_scale * Math.sinh(i * multiplierB));\n\t\t}\n\t\tpointsB.push(INFINITY);\n\n\t\tif (multiComponent) {\n\t\t\treturn [pointsA, pointsB];\n\t\t} else {\n\t\t\tpointsA.push(...pointsB);\n\t\t\treturn [pointsA];\n\t\t}\n\t}\n}\n\n\n/*\n * Returns a buffer array representing the graph of the given curve.\n * The array should be interpreted in groups of six,\n * each group representing the start and end coordinates\n * of a single line segment.\n *\n * Input is the 'reduced' attribute of a Curve.\n */\nfunction affineCurveGeometry(reduced) {\n\tconst output = [];\n\n\tif (typeof reduced === 'undefined') {\n\t\treduced = {coefficients: undefined, map: undefined};\n\t}\n\n\tconst curve = reduced.coefficients;\n\tconst map = reduced.map;\n\n\t// Placeholder for empty curve\n\tif (typeof curve !== 'undefined') {\n\t\t// Reduce given curve\n\t\tconst [a, b] = curve.map((x) => x.toJSNumber());\n\t\tconst f = (function(x) {\n\t\t\tconst y = Math.sqrt(Math.pow(x, 3) + a*x + b);\n\t\t\treturn isNaN(y) ? 0 : y;\n\t\t});\n\n\t\t// Construct geometry\n\t\tconst xLists = affineCurvePoints(a, b);\n\t\tfor (var xList of xLists) {\n\t\t\tconst yList = xList.map(f);\n\t\t\tconst points = [];\n\t\t\tconst reversePoints = [];\n\n\t\t\t// Construct appropriate points\n\t\t\tfor (var i=0; i < xList.length; i++) {\n\t\t\t\tpoints.push(xList[i], 1, yList[i]);\n\t\t\t\treversePoints.push(-yList[i], 1, xList[i]);\n\t\t\t}\n\t\t\treversePoints.reverse();\n\t\t\treversePoints.push(...points);\n\t\t\toutput.push(reversePoints);\n\t\t}\n\n\t\t// Transform under affine map\n\t\tconst inverseMap = map.inverse();\n\t\tfor (var component of output) {\n\t\t\tfor (i=0; i<component.length; i += 3) {\n\t\t\t\tconst [X, Y] = [component[i], component[i+2]];\n\t\t\t\tconst [x, y] = inverseMap.transformFloat(X, Y);\n\t\t\t\tcomponent[i] = x;\n\t\t\t\tcomponent[i+2] = y;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst array = [];\n\t\twhile (array.length < SEGMENTS*6) {\n\t\t\tarray.push(0, 0, 0);\n\t\t}\n\t\toutput.push(array);\n\t}\n\treturn output.map((x) => new Float32Array(x));\n}\n\n\n/*\n * Helper function for curveSurfaceGeometry.\n */\nfunction pushPoints(array, x, z) {\n\tconst alpha = norm(x, z);\n\tx *= alpha;\n\tz *= alpha;\n\n\tarray.push(0, 0, 0, x, alpha, z);\n\tarray.push(0, 0, 0, -x, -alpha, -z);\n}\n\n\n/*\n * Constructs the geometry for the curve surface\n * in projective space (3D view).\n *\n * Returns an index array and a Float32Array representing\n * the positions of the points.\n *\n * The position array should be read in groups of three,\n * each representing the xyz coordinates of a vertex in the geometry.\n *\n * If the curve contains two connected components,\n * the first half of the position array corresponds to the\n * \"loop\" component, while the second half corresponds to\n * the unbounded component.\n *\n * If the curve contains one connected component,\n * the second half of the position array will be padded with zeros.\n *\n * For performance reasons, the output of\n * affineCurveGeometry(curve) is passed as an argument.\n */\nfunction curveSurfaceGeometry(affinePoints) {\n\tconst output = [];\n\tconst index = [];\n\n\tif (typeof affinePoints === 'undefined') {\n\t\taffinePoints = affineCurveGeometry();\n\t}\n\n\tif (affinePoints.length === 2) {\n\t\t/*** Construct loop component ***/\n\t\tconst loopPoints = affinePoints.shift();\n\t\tconst nPoints = loopPoints.length/3;\n\n\t\tfor (var i = 0; i < nPoints; i++) {\n\t\t\tpushPoints(output,\n\t\t\t\tloopPoints[3*i],\n\t\t\t\tloopPoints[3*i+2]);\n\t\t\tindex.push(4*i, 4*i+1, (4*i+5) % (4*nPoints));\n\t\t\tindex.push(4*i+2, 4*i+3, (4*i+7) % (4*nPoints));\n\t\t}\n\t}\n\n\t/*** Construct unbounded component ***/\n\tconst mainPoints = affinePoints[0];\n\tconst nPoints = mainPoints.length/3;\n\tconst offset = 2*index.length/3;\n\n\t// Add points to geometry\n\tfor (i = 0; i < mainPoints.length; i += 3) {\n\t\tpushPoints(output, mainPoints[i], mainPoints[i+2]);\n\t}\n\n\t// Add appropriate indexed triangles\n\tfor (i = 0; i < nPoints - 1; i++) {\n\t\tconst curr = offset + 4*i;\n\t\tindex.push(curr,   curr+1, curr+5);\n\t\tindex.push(curr+2, curr+3, curr+7);\n\t}\n\n\t// Add two indexed triangles for projective point at infinity\n\tconst last = offset + 4*nPoints - 1;\n\tindex.push(last-1, last, offset+1);\n\tindex.push(last-3, last-2, offset+3);\n\n\twhile (output.length < SEGMENTS * 48) {\n\t\toutput.push(0, 0, 0);\n\t}\n\treturn [index, new Float32Array(output)];\n}\n\nexport {affineCurveGeometry, curveSurfaceGeometry};\n","import * as THREE from 'three';\nimport OrbitControls from 'three-orbitcontrols';\n\nimport {\n\taffineCurveGeometry, curveSurfaceGeometry\n} from 'math/graphics.js';\n\n/***** Setup *****/\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera(\n\t75, window.innerWidth/window.innerHeight,\n\t1e-2, 1e8);\nvar orbitControls;\n\nconst CURVE_COLOR = 0x7EEDED;\n\n\n\n/***** Main Scene *****/\n/** Elliptic curve **/\nconst curveLineMaterial = new THREE.LineBasicMaterial({\n\tcolor: CURVE_COLOR, linewidth: 4});\n\n// Loop component of two-component elliptic curve (optional)\nconst curveLineGeoA = new THREE.BufferGeometry();\ncurveLineGeoA.addAttribute('position',\n\tnew THREE.BufferAttribute(affineCurveGeometry()[0], 3)\n);\nconst curveLineA = new THREE.LineLoop(curveLineGeoA, curveLineMaterial);\nscene.add(curveLineA);\n\n// Unbounded component elliptic curve\nconst curveLineGeoB = new THREE.BufferGeometry();\ncurveLineGeoB.addAttribute('position',\n\tnew THREE.BufferAttribute(affineCurveGeometry()[0], 3)\n);\nconst curveLineB = new THREE.Line(curveLineGeoB, curveLineMaterial);\nscene.add(curveLineB);\n\n/** Coordinate Axes **/\n// Main (xz) axes\nconst axesMaterial = new THREE.LineBasicMaterial({color: 0xFFFFFF});\nconst axesGeo = new THREE.BufferGeometry();\naxesGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(new Float32Array([\n\t\t-1, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 1\n\t]), 3)\n);\nconst axes = new THREE.LineSegments(axesGeo, axesMaterial);\naxes.position.setY(0.99);\nscene.add(axes);\n\n// y-axis (only visible in 3D)\nconst yAxisMaterial = new THREE.LineBasicMaterial({\n\tcolor: 0xFFFFFF, transparent: true, opacity: 0});\nconst yAxisGeo = new THREE.BufferGeometry();\nyAxisGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(new Float32Array([0, -1, 0, 0, 1, 0]), 3)\n);\nconst yAxis = new THREE.Line(yAxisGeo, yAxisMaterial);\nyAxis.visible = false;\nscene.add(yAxis);\n\n/** Surfaces (3D) **/\n// Projective curve surface\nvar curveSurfaceMaterial = new THREE.MeshPhongMaterial({\n\tcolor: CURVE_COLOR, side: THREE.DoubleSide,\n\ttransparent: true, opacity: 0\n});\n\nconst curveSurfaceGeo = new THREE.BufferGeometry();\nconst [index, geoPoints] = curveSurfaceGeometry();\ncurveSurfaceGeo.setIndex(index);\ncurveSurfaceGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(geoPoints, 3));\n\nconst curveSurface = new THREE.Mesh(curveSurfaceGeo, curveSurfaceMaterial);\ncurveSurface.visible = false;\nscene.add(curveSurface);\n\n\n// Plane at y=1\nconst planeMaterial = new THREE.MeshPhongMaterial({\n\tcolor: 0x888888, side: THREE.DoubleSide,\n\ttransparent: true, opacity: 0\n});\nconst planeGeo = new THREE.PlaneBufferGeometry(2, 2);\nconst plane = new THREE.Mesh(planeGeo, planeMaterial);\nplane.rotateX(Math.PI/2);\nplane.position.setY(1);\nscene.add(plane);\n\n\n/** Lights **/\nconst ambientLight = new THREE.AmbientLight(0x404040, 0.1);\nscene.add(ambientLight);\n\nconst directionalLight = new THREE.DirectionalLight(0xFFFFFF, 0.3);\ndirectionalLight.target.position.set(5, 0, -1);\nscene.add(directionalLight);\nscene.add(directionalLight.target);\n\nconst light = new THREE.PointLight(0xFFFFFF, 0.7);\nscene.add(light);\n\n/*\nconst testCube = new THREE.Mesh(\n\tnew THREE.BoxBufferGeometry(1, 1, 1),\n\tnew THREE.MeshLambertMaterial({color: 0xFF0000})\n);\nscene.add(testCube);\n*/\n\n\n\n/***** API *****/\nfunction initialize() {\n\tconst canvas = document.getElementById('main-view');\n\n\t// Set initial camera state\n\tcamera.quaternion.set(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\tcamera.quaternion.normalize();\n\tcamera.position.set(0, 5, 0);\n\tcamera.updateProjectionMatrix();\n\n\t// Initialize orbit controls\n\torbitControls = new OrbitControls(camera, canvas);\n\torbitControls.dampingFactor = 0.15;\n\torbitControls.rotateSpeed = 0.15;\n\torbitControls.screenSpacePanning = true;\n}\n\nfunction update() {\n\tif (orbitControls.enabled) {orbitControls.update();}\n\n\tconst uxScale = 10 * Math.max(camera.position.length(), 0.1);\n\taxes.scale.setScalar(uxScale);\n\tplane.scale.setScalar(uxScale);\n\tyAxis.scale.setScalar(uxScale);\n\tcurveSurface.scale.setScalar(uxScale);\n\n\tlight.position.copy(camera.position);\n}\n\n// List of objects whose visibility depends on 2D/3D switch\nconst toggle3DList = [plane, yAxis, curveSurface];\n\nexport {\n\tinitialize, update,\n\ttoggle3DList,\n\n\tscene, camera, orbitControls,\n\tcurveLineA, curveLineB, curveSurface,\n\taxes, yAxis, plane\n};\n","import * as THREE from 'three';\nimport * as SCENE from './scene.js';\n\nvar transitions = [];\nconst EPSILON = 1e-5;\nconst cubicEase = (x) => (x > 1) ? 1 : (1-Math.pow(1-x, 3));\nconst cosineEase = (x) => (x > 1) ? 1 : (1-Math.cos(x * Math.PI))/2;\n\n/***** Helper Functions *****/\nfunction runTransitions() {\n\tconst running = [];\n\tconst now = (new Date()).getTime();\n\n\twhile (transitions.length > 0) {\n\t\tconst transition = transitions.pop();\n\t\tconst done = transition(now);\n\n\t\tif (!done) {\n\t\t\trunning.push(transition);\n\t\t}\n\t}\n\t\n\twhile (running.length > 0) {\n\t\ttransitions.push(running.pop());\n\t}\n}\n\n\n/***** BEGIN TRANSITIONS *****/\nfunction start3DTransition(view3D) {\n\tSCENE.orbitControls.enabled = false;\n\ttransitions = [];\n\n\tconst now = (new Date()).getTime();\n\tif (!view3D) {\n\t\tconst cameraTarget = SCENE.orbitControls.target.clone();\n\t\tconst cameraPosition = SCENE.camera.position.clone();\n\t\tcameraPosition.sub(cameraTarget);\n\t\tconst cameraDistance = cameraPosition.length();\n\n\t\tconst initialQuaternion = SCENE.camera.quaternion.clone();\n\t\tconst targetQuaternion = new THREE.Quaternion(\n\t\t\t-Math.sqrt(0.5) + EPSILON, 0, 0, Math.sqrt(0.5) + EPSILON);\n\t\ttargetQuaternion.normalize();\n\n\t\ttransitions.unshift(\n\t\t\t(t) => orbitCameraTransition(\n\t\t\t\tt, now, now + 300,\n\t\t\t\tcameraDistance, cameraTarget,\n\t\t\t\tinitialQuaternion, targetQuaternion\n\t\t\t)\n\t\t);\n\t}\n\n\t// Shift axes position\n\ttransitions.unshift(\n\t\t(t) => shiftAxesTransition(t, view3D, now, now + 300)\n\t);\n\n\t// Toggle surface visibility\n\tif (view3D) {\n\t\tfor (var obj of SCENE.toggle3DList) {\n\t\t\tobj.visible = true;\n\t\t}\n\t}\n\tSCENE.yAxis.transparent = true;\n\ttransitions.unshift(\n\t\t(t) => toggleSurfacesTransition(t, view3D, now, now + 300)\n\t);\n\n\t// Re-enable controls after delay\n\ttransitions.unshift(\n\t\t(t) => enableControlsTransition(t, view3D, now + 350)\n\t);\n}\n\nfunction orbitCameraTransition(\n\t\tnow, start, stop,\n\t\tradius, target,\n\t\tq0, q1) {\n\tconst camera = SCENE.camera;\n\tconst alpha = cosineEase((now-start) / (stop-start));\n\n\t// Compute new quaternion\n\tconst quaternion = q0.clone();\n\tquaternion.slerp(q1, alpha);\n\n\t// Compute new camera position\n\tconst newPosition = new THREE.Vector3(0, 0, radius);\n\tnewPosition.applyQuaternion(quaternion);\n\tnewPosition.add(target);\n\n\t// Update camera setup\n\tcamera.quaternion.copy(quaternion);\n\tcamera.position.copy(newPosition);\n\tcamera.updateProjectionMatrix();\n\treturn now > stop;\n}\n\n\nfunction shiftAxesTransition(now, view3D, start, stop) {\n\tconst alpha = cubicEase((now-start) / (stop-start));\n\tconst y = view3D ? (1-alpha) : alpha;\n\tSCENE.axes.position.setY(y);\n\treturn now > stop;\n}\n\nfunction toggleSurfacesTransition(now, view3D, start, stop) {\n\tconst alpha = cubicEase((now-start) / (stop-start));\n\tconst beta = view3D ? alpha : (1-alpha);\n\n\tSCENE.plane.material.opacity = 0.6 * beta;\n\tSCENE.curveSurface.material.opacity = 0.95 * beta;\n\tSCENE.yAxis.material.opacity = beta;\n\n\tif (now > stop) {\n\t\tif (!view3D) {\n\t\t\tfor (var obj of SCENE.toggle3DList) {\n\t\t\t\tobj.visible = false;\n\t\t\t}\n\t\t}\n\t\tSCENE.yAxis.transparent = false;\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\nfunction enableControlsTransition(now, view3D, targetTime) {\n\tif (now < targetTime) {\n\t\treturn false;\n\t} else {\n\t\tconst controls = SCENE.orbitControls;\n\n\t\t// Enable/disable approrpiate features\n\t\tcontrols.enableRotate = view3D;\n\t\tcontrols.enableDamping = view3D;\n\n\t\t// Swap controls mouse buttons\n\t\tif (view3D) {\n\t\t\tcontrols.mouseButtons.LEFT = THREE.MOUSE.LEFT;\n\t\t\tcontrols.mouseButtons.RIGHT = THREE.MOUSE.RIGHT\n\t\t} else {\n\t\t\tcontrols.mouseButtons.LEFT = THREE.MOUSE.RIGHT;\n\t\t\tcontrols.mouseButtons.RIGHT = THREE.MOUSE.LEFT;\n\t\t}\n\t\t\n\t\t// Raise or lower control target appropriately\n\t\tcontrols.target.setY(view3D ? 0 : 1);\n\t\t\n\t\tcontrols.enabled = true;\n\t\treturn true;\n\t}\n}\n\nexport {\n\trunTransitions,\n\tstart3DTransition,\n\tenableControlsTransition\n};\n","import * as THREE from 'three';\n\nimport * as SCENE from './scene.js';\nimport * as TRANS from './transitions.js';\n\nimport {affineCurveGeometry, curveSurfaceGeometry} from 'math/graphics.js';\n\n/***** State *****/\nvar initialized = false;\nvar view3D = false;\n\n/***** Initialization *****/\nvar renderer;\n\nfunction initializeRenderer() {\n\tconst canvas = document.getElementById('main-view');\n\trenderer = new THREE.WebGLRenderer({\n\t\tcanvas: canvas,\n\t\tantialias: true,\n\t\tlogarithmicDepthBuffer: true\n\t});\n\trenderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);\n\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\twindow.addEventListener('resize', handleResize);\n}\n\nfunction handleResize(e) {\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tSCENE.camera.aspect = window.innerWidth / window.innerHeight;\n\tSCENE.camera.updateProjectionMatrix();\n}\n\nfunction initialize() {\n\tinitializeRenderer();\n\tSCENE.initialize();\n\tTRANS.enableControlsTransition(0, view3D, 0);\n\tinitialized = true;\n}\n\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\trenderer.render(SCENE.scene, SCENE.camera);\n\n\tSCENE.update();\n\tTRANS.runTransitions();\n}\n\n\n/***** Interface *****/\nfunction render() {\n\tinitialize();\n\tanimate();\n}\n\nfunction updateCurve(curve) {\n\tconst curveGeo = affineCurveGeometry(curve.reduced);\n\n\tconst geoA = SCENE.curveLineA.geometry;\n\tconst posA = geoA.attributes.position;\n\tconst geoB = SCENE.curveLineB.geometry;\n\tconst posB = geoB.attributes.position;\n\n\tif (curveGeo.length === 1) {\n\t\tposB.copyArray(curveGeo[0]);\n\t\tSCENE.curveLineA.visible = false;\n\t} else {\n\t\tposA.copyArray(curveGeo[0]);\n\t\tposA.needsUpdate = true;\n\t\tgeoA.computeBoundingSphere();\n\n\t\tposB.copyArray(curveGeo[1]);\n\t\tSCENE.curveLineA.visible = true;\n\t}\n\tposB.needsUpdate = true;\n\tgeoB.computeBoundingSphere();\n\n\tif (view3D) {\n\t\tconst surfaceGeo = SCENE.curveSurface.geometry;\n\t\tconst surfacePos = surfaceGeo.attributes.position;\n\n\t\tconst [index, geoPoints] = curveSurfaceGeometry(curveGeo);\n\t\tsurfaceGeo.setIndex(index);\n\t\tsurfacePos.copyArray(geoPoints);\n\t\tsurfacePos.needsUpdate = true;\n\n\t\tsurfaceGeo.computeBoundingSphere();\n\t\tsurfaceGeo.computeVertexNormals();\n\t}\n\n}\n\nfunction set3D(newView3D) {\n\tif (initialized & (newView3D !== view3D)) {\n\t\tview3D = newView3D;\n\t\tTRANS.start3DTransition(view3D);\n\t}\n}\n\nexport default render;\nexport {updateCurve, set3D};\n","import React, {PureComponent} from 'react';\nimport renderScene, {updateCurve, set3D} from './render.js';\nimport './MainView.css';\n\nclass MainView extends PureComponent {\n\tcomponentDidMount() {\n\t\trenderScene();\n\t\tthis.update();\n\t}\n\n\tupdate() {\n\t\tset3D(this.props.view3D);\n\t\tupdateCurve(this.props.curve);\n\t}\n\n\trender() {\n\t\tthis.update();\n\t\treturn <canvas id='main-view'/>;\n\t}\n}\n\nexport default MainView;\n","import bigInt from 'big-integer';\n\n\nclass BigRational {\n\tconstructor(numerator, denominator=1) {\n\t\tif (numerator instanceof BigRational) {\n\t\t\tthis.n = numerator.n;\n\t\t\tthis.d = numerator.d;\n\t\t} else {\n\t\t\tthis.n = bigInt(numerator);\n\t\t\tthis.d = bigInt(denominator);\n\t\t\tif (this.d.lt(0)) {\n\t\t\t\tthis.d = this.d.abs();\n\t\t\t\tthis.n = bigInt.zero.minus(this.n);\n\t\t\t}\n\t\t\tthis.reduce();\n\t\t}\n\t}\n\n\treduce() {\n\t\tconst gcd = bigInt.gcd(this.d, this.n);\n\t\tthis.n = this.n.divide(gcd);\n\t\tthis.d = this.d.divide(gcd);\n\t}\n\n\n\t/***** Unary Arithmetic Operators *****/\n\tnegate() {\n\t\treturn new BigRational(bigInt.zero.minus(this.n), this.d);\n\t}\n\n\treciprocal() {\n\t\treturn new BigRational(this.d, this.n);\n\t}\n\n\n\t/***** Binary Arithmetic Operators *****/\n\tplus(other) {\n\t\treturn new BigRational(\n\t\t\tthis.n.times(other.d).plus(this.d.times(other.n)),\n\t\t\tthis.d.times(other.d)\n\t\t);\n\t}\n\n\tminus(other) {\n\t\treturn this.plus(other.negate());\n\t}\n\n\ttimes(other) {\n\t\tother = new BigRational(other);\n\t\treturn new BigRational(this.n.times(other.n), this.d.times(other.d));\n\t}\n\n\tdivide(other) {\n\t\treturn this.times(other.reciprocal());\n\t}\n\n\tpow(other) {\n\t\tif (other === 0) {return new BigRational(1)};\n\t\tif (other < 0) {return this.reciprocal().pow(Math.abs(other))};\n\n\t\t// Construct powers of two for efficiency\n\t\tvar exponent = 0;\n\t\tvar curr = this;\n\t\tconst powers = [curr];\n\n\t\twhile (other > Math.pow(2, exponent)) {\n\t\t\texponent++;\n\t\t\tcurr = curr.times(curr);\n\t\t\tpowers.push(curr);\n\t\t}\n\n\t\t// Compute answer\n\t\tvar answer = new BigRational(1);\n\t\tfor (var i=0; i <= exponent; i++) {\n\t\t\tif ((other >> i) % 2 === 1) {\n\t\t\t\tanswer = answer.times(powers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn answer;\n\t}\n\n\n\t/***** Comparison Operators *****/\n\teq(other) {\n\t\tother = new BigRational(other);\n\t\treturn this.n.eq(other.n) && this.d.eq(other.d);\n\t}\n\n\tgt(other) {\n\t\tother = new BigRational(other);\n\t\treturn this.n.times(other.d).gt(other.n.times(this.d));\n\t}\n\n\tlt(other) {\n\t\treturn other.gt(this);\n\t}\n\n\tgte(other) {return this.gt(other) || this.eq(other);}\n\tlte(other) {return this.lt(other) || this.eq(other);}\n\n\n\t/***** Utility Functions *****/\n\ttoString() {\n\t\tif (this.d.eq(1)) {\n\t\t\treturn this.n.toString();\n\t\t} else {\n\t\t\treturn this.n.toString() + '/' + this.d.toString();\n\t\t}\n\t}\n}\n\nexport default BigRational;\n","import bigInt from 'big-integer';\nimport BigRational from './bigRational.js';\n\n/*\n * Represents the affine map\n *\n * (x, y) -> (\n *     a_x * x + b_x * y + c_x,\n *     a_y * x + b_y * y + c_y\n * ).\n */\nclass AffineMap {\n\t/*\n\t * Coefficients are [a_x, b_x, c_x, a_y, b_y, c_y],\n\t * in that order.\n\t *\n\t * All coefficients are implicitly divided by 'denominator'.\n\t * This allows the use of bigInt arithmetic.\n\t *\n\t * Precondition: denominator is nonzero\n\t */\n\tconstructor(coefficients, denominator=1) {\n\t\tthis.coefficients = coefficients.map((x) => bigInt(x));\n\t\tthis.denominator = bigInt(denominator);\n\t\tif (this.denominator.lt(0)) {\n\t\t\tthis.denominator = this.denominator.abs();\n\t\t\tthis.coefficients = this.coefficients.map((x) => bigInt.zero.minus(x));\n\t\t}\n\t\tthis.reduce();\n\t}\n\t\n\treduce() {\n\t\tvar gcd = this.denominator;\n\n\t\tfor (var coefficient of this.coefficients) {\n\t\t\tgcd = bigInt.gcd(gcd, coefficient);\n\t\t}\n\n\t\tthis.denominator = this.denominator.divide(gcd);\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tthis.coefficients[i] = this.coefficients[i].divide(gcd);\n\t\t}\n\t}\n\n\tcompose(other) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst [A, B, C, D, E, F] = other.coefficients\n\n\t\treturn new AffineMap([\n\t\t\ta.times(A).plus(b.times(D)),\n\t\t\ta.times(B).plus(b.times(E)),\n\t\t\ta.times(C).plus(b.times(F)).plus(c.times(other.denominator)),\n\t\t\td.times(A).plus(e.times(D)),\n\t\t\td.times(B).plus(e.times(E)),\n\t\t\td.times(C).plus(e.times(F)).plus(f.times(other.denominator))\n\t\t], this.denominator.times(other.denominator));\n\t}\n\n\tinverse() {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst determinant = a.times(e).minus(b.times(d));\n\t\tconst den = this.denominator;\n\n\t\tconst coefficients = [\n\t\t\te.times(den),\n\t\t\tbigInt.zero.minus(b).times(den),\n\t\t\tb.times(f).minus(c.times(e)),\n\t\t\tbigInt.zero.minus(d).times(den),\n\t\t\ta.times(den),\n\t\t\tc.times(d).minus(a.times(f)),\n\t\t];\n\n\t\treturn new AffineMap(coefficients, determinant);\n\t}\n\n\ttransformFloat(x, y) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients.map(\n\t\t\t(x) => x.toJSNumber()\n\t\t);\n\t\tconst den = this.denominator.toJSNumber();\n\t\treturn [\n\t\t\t(a*x + b*y + c)/den,\n\t\t\t(d*x + e*y + f)/den\n\t\t];\n\t}\n\n\ttransformBigRational(x, y) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients.map(\n\t\t\t(x) => new BigRational(x)\n\t\t);\n\t\tconst den = new BigRational(this.denominator);\n\t\treturn [\n\t\t\ta.times(x).plus(b.times(y)).plus(c).divide(den),\n\t\t\td.times(x).plus(e.times(y)).plus(f).divide(den),\n\t\t];\n\t}\n\n\ttoString() {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst D = this.denominator;\n\n\t\tconst mapString = `(x, y) -> (${a}x + ${b}y + ${c}, ${d}x + ${e}y + ${f})`;\n\t\tif (D.eq(1)) {\n\t\t\treturn mapString;\n\t\t} else {\n\t\t\treturn mapString + ' / ' + D.toString();\n\t\t}\n\t}\n}\n\nconst IdentityMap = new AffineMap([1, 0, 0, 0, 1, 0]);\n\nexport default AffineMap;\nexport {IdentityMap};\n","import bigInt from 'big-integer';\n\n// Precompute small primes\nconst small_primes = [];\nfor (var i=2; i < 300000; i++) {\n\tif (bigInt(i).isProbablePrime()) {\n\t\tsmall_primes.push(bigInt(i));\n\t}\n}\n\n/*\n * Factors an integer n.\n *\n * Returns an array of tuples (p_i, e_i),\n * so that n = product(p_i ^ e_i),\n * the p_i are prime,\n * and all e_i > 0.\n *\n * For performance reasons,\n * factorization may be inaccurate\n * if n contains prime divisors\n * with more than 12 digits.\n */\nfunction factor(n) {\n\tn = bigInt(n);\n\tif (n.lt(2)) {\n\t\treturn [];\n\t}\n\n\tconst factorization = [];\n\n\tfor (var prime of small_primes) {\n\t\tvar exponent = 0;\n\t\twhile (n.isDivisibleBy(prime)) {\n\t\t\texponent++;\n\t\t\tn = n.divide(prime);\n\t\t}\n\n\t\tif (exponent > 0) {\n\t\t\tfactorization.push([prime, exponent]);\n\t\t}\n\n\t\tif (prime.pow(2).gt(n)) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (n.gt(1)) {\n\t\tfactorization.push([n, 1]);\n\t}\n\treturn factorization;\n}\n\nexport {factor};\n","import bigInt from 'big-integer';\n\nimport AffineMap, {IdentityMap} from './affineMap.js';\n\n/*\n * Reduces the given general elliptic curve\n * to the Weierstrass form\n *\n * Y^2 + a_1 XY + a_3 Y = X^3 + a_2 X^2 + a_4 X + a_6.\n *\n * Input is an array of ten BigInts,\n * interpreted as described in App.js.\n *\n * Returns the coefficients [a_i] of the transformed\n * equation and the map (x, y) -> (X, Y).\n */\nfunction reduce1(curve) {\n\t// NOT IMPLEMENTED\n\treturn curve;\n}\n\n\n/*\n * Reduces the given Weierstrass form\n *\n * y^2 + axy + cy = x^3 + bx^2 + dx + e.\n *\n * to the reduced form\n *\n * Y^2 = X^3 + AX^2 + BX + C.\n *\n * Input is an array of five BigInts\n * representing the coefficients [a, b, c, d, e].\n *\n * Returns the coefficients [A, B, C] of the transformed\n * equation and the map (x, y) -> (X, Y).\n */\nfunction reduce2(curve) {\n\tconst [a, b, c, d, e] = curve;\n\tconst coefficients = [\n\t\tb.times(4).plus(a.times(a)),\n\t\td.times(2).plus(a.times(c)).times(8),\n\t\te.times(4).plus(c.times(c)).times(16)\n\t];\n\n\tconst map = new AffineMap([\n\t\t4, 0, 0,\n\t\ta.times(4), 8, c.times(4)\n\t]);\n\treturn [coefficients, map];\n}\n\n/*\n * Reduces the given curve\n *\n * y^2 = x^3 + ax^2 + bx + c\n *\n * to the form\n *\n * Y^2 = X^3 + AX + B.\n *\n * Returns the coefficients [A, B]\n * and the map (x, y) -> (X, Y).\n */\nfunction reduce3(curve) {\n\tconst [a, b, c] = curve;\n\tconst coefficients = [\n\t\tb.times(3).minus(a.times(a)).times(27),\n\t\ta.times(\n\t\t\ta.times(a.times(2)).minus(b.times(9))\n\t\t).plus(c.times(27)).times(27)\n\t]\n\n\tconst map = new AffineMap([\n\t\t9, 0, a.times(3),\n\t\t0, 27, 0\n\t]);\n\treturn [coefficients, map];\n}\n\n/*\n * Reduces the given curve\n *\n * y^2 = x^3 + ax + b\n *\n * to the form\n *\n * Y^2 = X^3 + AX + B\n *\n * with minimal discriminant.\n *\n * Returns the coefficients [A, B]\n * and the map (X, Y) -> (x, y).\n */\nfunction minimize(curve) {\n\tconst [a, b] = curve;\n\n\tif (a.eq(0) && b.eq(0)) {\n\t\tconst map = new AffineMap([\n\t\t\t6, 0, 0,\n\t\t\t0, 1, 0\n\t\t], 216);\n\t\treturn [curve, map];\n\t}\n\n\tvar gcd = bigInt.gcd(a.pow(3), b.pow(2));\n\tvar scale = bigInt.one;\n\n\tvar p = bigInt(2);\n\twhile (p.pow(12).leq(gcd)) {\n\t\tif (gcd.isDivisibleBy(p.pow(12))) {\n\t\t\tgcd = gcd.divide(p.pow(12));\n\t\t\tscale = scale.times(p);\n\t\t} else {\n\t\t\tp = p.plus(1);\n\t\t}\n\t}\n\n\tconst coefficients = [\n\t\ta.divide(scale.pow(4)),\n\t\tb.divide(scale.pow(6))\n\t];\n\n\tconst map = new AffineMap([\n\t\tscale.pow(4), 0, 0,\n\t\t0, scale.pow(3), 0\n\t], scale.pow(6));\n\treturn [coefficients, map];\n}\n\n\n/*\n * Composes the given list of functions.\n */\nfunction compose(functions) {\n\treturn (function(curve) {\n\t\tvar overallMap = IdentityMap;\n\t\tvar map;\n\n\t\tfor (var f of functions) {\n\t\t\t[curve, map] = f(curve);\n\t\t\toverallMap = map.compose(overallMap);\n\t\t}\n\n\t\treturn [curve, overallMap];\n\t});\n}\n\nconst reduceFull = compose([reduce2, reduce3, minimize]);\n\nexport {\n\treduce1,\n\treduce2,\n\treduce3,\n\tminimize\n};\nexport default reduceFull;\n","import BigRational from './bigRational.js';\n\n/*\n * Represents a rational point on a reduced elliptic curve.\n *\n * The attributes x and y are BigRationals representing\n * the x and y coordinates of the curve.\n *\n * The point at infinity is represented by setting\n * x, y = NaN.\n */\nclass RationalPoint {\n\tconstructor(reducedCurve, x, y) {\n\t\tthis.curve = reducedCurve.reduced;\n\t\tif (Number.isNaN(x)) {\n\t\t\tthis.x = NaN;\n\t\t\tthis.y = NaN;\n\t\t} else {\n\t\t\tthis.x = new BigRational(x);\n\t\t\tthis.y = new BigRational(y);\n\t\t}\n\t}\n\n\tisIdentity() {\n\t\treturn Number.isNaN(this.x);\n\t}\n\n\t/***** Group Operations *****/\n\t// All group operations assume that 'this'\n\t// and 'other' share the same elliptic curve!\n\teq(other) {\n\t\tif (this.isIdentity()) {return other.isIdentity();}\n\t\tif (other.isIdentity()) {return this.isIdentity();}\n\t\treturn this.x.eq(other.x) && this.y.eq(other.y);\n\t}\n\n\tplus(other) {\n\t\t// Check if either argument is identity\n\t\tif (this.isIdentity()) {return other;};\n\t\tif (other.isIdentity()) {return this;};\n\n\t\t// Check if other point is additive inverse\n\t\tif (this.x.eq(other.x) && this.y.negate().eq(other.y)) {\n\t\t\treturn getIdentity(this.curve);\n\t\t}\n\n\t\t// Perform point addition\n\t\tconst [a, b] = this.curve.coefficients.map((x) => new BigRational(x));\n\n\t\t// Construct line through points\n\t\tvar slope;\n\t\tif (this.eq(other)) {\n\t\t\t// Construct tangent line\n\t\t\t// We don't need to worry about 2-torsion points since\n\t\t\t// we already checked for other = this.inverse()\n\t\t\tslope = this.x.pow(2).times(3).plus(a).divide(this.y.times(2));\n\t\t} else {\n\t\t\t// Construct secant line\n\t\t\tslope = other.y.minus(this.y).divide(other.x.minus(this.x));\n\t\t}\n\t\tconst intercept = this.y.minus(slope.times(this.x));\n\n\t\t// Synthetic division to locate third point\n\t\tconst cubic = substitute(a, b, slope, intercept);\n\t\tconst quadratic = syntheticDivide(cubic, this.x)[0];\n\t\tconst linear = syntheticDivide(quadratic, other.x)[0];\n\t\tconst X = linear[0].negate();\n\t\tconst Y = slope.times(X).plus(intercept).negate();\n\t\treturn new RationalPoint(this.curve, X, Y);\n\t}\n\n\tinverse() {\n\t\treturn new RationalPoint(this.curve, this.x, this.y.negate());\n\t}\n\n\tminus(other) {\n\t\treturn this.plus(other.inverse());\n\t}\n\n\t// Integer multiplication (repeated addition)\n\ttimes(other) {\n\t\tif (other === 0) {return getIdentity(this.curve);}\n\t\tif (other < 0) {return this.inverse().times(Math.abs(other));}\n\n\t\t// Construct powers of two for efficiency\n\t\tvar exponent = 0;\n\t\tvar curr = this;\n\t\tconst powers = [curr];\n\n\t\twhile (other > Math.pow(2, exponent)) {\n\t\t\texponent++;\n\t\t\tcurr = curr.plus(curr);\n\t\t\tpowers.push(curr);\n\t\t}\n\n\t\t// Compute answer\n\t\tvar answer = getIdentity(this.curve);\n\t\tfor (var i=0; i<=exponent; i++) {\n\t\t\tif ((other >> i) % 2 === 1) {\n\t\t\t\tanswer = answer.plus(powers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn answer;\n\t}\n\n\t/***** Group Theory *****/\n\torder() {\n\t\tvar curr = this;\n\t\tfor (var i = 1; i <= 12; i++) {\n\t\t\tif (curr.isIdentity()) {return i;}\n\t\t\tcurr = curr.plus(this);\n\t\t}\n\t\t\n\t\t// By Mazur's theorem\n\t\treturn Infinity;\n\t}\n\n\n\t/***** Utility Functions *****/\n\ttoString() {\n\t\tif (this.isIdentity()) {\n\t\t\treturn '\\u221E @ ' + this.curve.toString();\n\t\t} else {\n\t\t\treturn '('\n\t\t\t\t+ this.x.toString() + ', '\n\t\t\t\t+ this.y.toString() + ') @ ' + this.curve.toString();\n\t\t}\n\t}\n}\n\nfunction getIdentity(curve) {\n\treturn new RationalPoint(curve, NaN, NaN);\n}\n\n/*\n * Substitutes y = cx + d\n * into the curve y^2 = x^3 + ax + b.\n *\n * Returns [e, f, g] so that the\n * new equation can be written as\n * x^3 + ex^2 + fx + g = 0.\n *\n * All inputs and outputs are BigRationals.\n */\nfunction substitute(a, b, c, d) {\n\treturn [\n\t\tc.pow(2).negate(),\n\t\ta.minus(c.times(d).times(2)),\n\t\tb.minus(d.pow(2))\n\t];\n}\n\n/*\n * Divides the monic polynomial\n * x^{n+1} + a_0 x^n + a_1 x^{n-1} + ... + a_n\n * by x-a.\n *\n * The 'coefficients' array should be an array of BigRationals\n * representing [a_0, ..., a_n].\n * The 'a' argument is a BigRational representing a.\n *\n * Outputs the coefficients of the quotient,\n * and the remainder.\n */\nfunction syntheticDivide(coefficients, a) {\n\tcoefficients = coefficients.map((x) => new BigRational(x));\n\ta = new BigRational(a);\n\tconst output = [];\n\tvar curr = new BigRational(1);\n\n\tfor (var coefficient of coefficients) {\n\t\tcurr = curr.times(a).plus(coefficient);\n\t\toutput.push(curr);\n\t}\n\tconst remainder = output.pop();\n\treturn [output, remainder];\n}\n\n\nexport default RationalPoint;\nexport {getIdentity, substitute, syntheticDivide};\n","import bigInt from 'big-integer';\n\nimport reduceFull from './reduce.js';\nimport {factor} from './numberTheory.js';\nimport {findRoots} from './analysis.js';\nimport RationalPoint from './rationalPoint.js';\n\n\n/*\n * Represents an elliptic curve with equation\n * y^2 + axy + cy = x^3 + bx^2 + dx + e.\n */\nclass Curve {\n\tconstructor(...coefficients) {\n\t\tthis.coefficients = coefficients.map((x) => bigInt(x));\n\t\tthis.computeReduction();\n\t\tthis.computeTorsionPoints();\n\t}\n\n\tcomputeReduction() {\n\t\tconst [curve, map] = reduceFull(this.coefficients);\n\t\tthis.reduced = new ReducedCurve(curve, map);\n\t}\n\n\tcomputeTorsionPoints() {}\n\n\ttoString() {\n\t\tconst [a, b, c, d, e] = this.coefficients;\n\t\treturn 'y\\u00B2 + '\n\t\t\t+ a.toString() + 'xy + '\n\t\t\t+ c.toString() + 'y = x\\u00B3 + '\n\t\t\t+ b.toString() + 'x\\u00B2 + '\n\t\t\t+ d.toString() + 'x + '\n\t\t\t+ e.toString();\n\t}\n}\n\n\n/*\n * Represents an elliptic curve with equation\n * y^2 = x^3 + ax + b.\n */\nclass ReducedCurve extends Curve {\n\tconstructor(coefficients, map) {\n\t\tsuper(...coefficients);\n\t\tthis.map = map;\n\t}\n\n\tcomputeReduction() {\n\t\tthis.reduced = this;\n\t}\n\n\tcomputeDiscriminant() {\n\t\tconst [a, b] = this.coefficients;\n\t\tthis.discriminant = a.pow(3).times(4).plus(\n\t\t\tb.pow(2).times(27)\n\t\t).times(-16);\n\t\tthis.discriminantFactorization = factor(this.discriminant.abs());\n\t}\n\n\tcomputeTorsionPoints() {\n\t\tthis.computeDiscriminant();\n\n\t\tconst candidates = this.getCandidateTorsionPoints().map(\n\t\t\t(p) => new RationalPoint(this, ...p)\n\t\t);\n\n\t\tthis.torsionPoints = [];\n\t\tfor (var p of candidates) {\n\t\t\tif (isFinite(p.order())) {this.torsionPoints.push(p)};\n\t\t}\n\t}\n\n\tgetCandidateTorsionPoints() {\n\t\tconst yCandidates = [bigInt.one];\n\n\t\t// Nagell-Lutz theorem\n\t\tfor (var [prime, exponent] of this.discriminantFactorization) {\n\t\t\tif (prime.eq(2)) {exponent -= 4}; // Reduced discriminant\n\t\t\tif (exponent < 2) {continue;}\n\n\t\t\tconst currentCandidates = [...yCandidates];\n\t\t\tfor (var i=1; 2*i <= exponent; i++) {\n\t\t\t\tconst multiplier = prime.pow(i);\n\t\t\t\tyCandidates.push(...currentCandidates.map(\n\t\t\t\t\t(x) => x.times(multiplier)\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tyCandidates.push(bigInt.zero);\n\n\t\t// Compute possible corresponding x-values\n\t\tconst candidates = [];\n\t\tconst [a, b] = this.coefficients;\n\t\tfor (var y of yCandidates) {\n\t\t\t// Find roots of corresponding cubic\n\t\t\tconst roots = findRoots(\n\t\t\t\ta.toJSNumber(),\n\t\t\t\tb.minus(y.pow(2)).toJSNumber());\n\n\t\t\t// Check if roots are integral solutions\n\t\t\tfor (var x of roots) {\n\t\t\t\tif (Math.abs(x - Math.round(x)) > 1e-5) {continue;}\n\t\t\t\tx = bigInt(Math.round(x));\n\t\t\t\tif (x.pow(3).plus(a.times(x)).plus(b).eq(y.pow(2))) {\n\t\t\t\t\tcandidates.push([x, y]);\n\t\t\t\t\tif (!y.eq(0)) {candidates.push([x, bigInt.zero.minus(y)])};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Point at infinity\n\t\tcandidates.push([NaN, NaN]);\n\t\treturn candidates;\n\t}\n\n\ttoString() {\n\t\tconst [a, b] = this.coefficients;\n\t\treturn 'y\\u00B2 = x\\u00B3 + ' + a.toString() + 'x + ' + b.toString();\n\t}\n}\n\nexport default Curve;\nexport {ReducedCurve};\n","import React, {PureComponent} from 'react';\n\nimport bigInt from 'big-integer';\n\nimport ControlBar from './components/ControlBar/ControlBar.js';\nimport InfoPanel from './components/InfoPanel/InfoPanel.js';\n//import HelpPanel from './components/HelpPanel/HelpPanel.js';\nimport MainView from './components/MainView/MainView.js';\n\nimport Curve from './math/curve.js';\n\nimport 'katex/dist/katex.min.css';\nimport './App.css';\n\n/*\n * curve: An array of six BigInts representing the currently shown elliptic curve.\n *        The array [a_1, a_2, a_3, a_4, a_6] represents\n *        coefficients in the Weierstrass equation\n *        y^2 + a_1 xy + a_3 y = x^3 + a_2 x^2 + a_4 x + a_6.\n */\n\nclass App extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// y^2 = x^3 - x\n\t\tconst initialCurve = [0, 0, 0, -1, 0];\n\n\t\tthis.state = {\n\t\t\tcurve: initialCurve.map((x) => bigInt(x)),\n\t\t\tinfoPanelOpen: window.innerWidth > 800,\n\t\t\tview3D: false,\n\t\t\thelpPanelOpen: false\n\t\t}\n\t}\n\n\ttoggleInfoPanel() {\n\t\tthis.setState({infoPanelOpen: !this.state.infoPanelOpen});\n\t}\n\n\ttoggleHelpPanel() {\n\t\tthis.setState({helpPanelOpen: !this.state.helpPanelOpen});\n\t}\n\n\ttoggle3DView() {\n\t\tthis.setState({view3D: !this.state.view3D});\n\t}\n\n\tsetCoefficient(i, v) {\n\t\tconst curve = this.state.curve;\n\t\tcurve[i] = v;\n\t\tthis.setState({curve: [...curve]});\n\t}\n\n\trender() {\n\t\tconst curve = new Curve(...this.state.curve);\n\t\treturn (\n\t\t\t<div className='app'>\n\t\t\t\t<ControlBar\n\t\t\t\t\tcurve={curve}\n\t\t\t\t\tsetCoefficient={this.setCoefficient.bind(this)}\n\n\t\t\t\t\thandleMenuButton={this.toggleInfoPanel.bind(this)}\n\t\t\t\t\thandleHelpButton={this.toggleHelpPanel.bind(this)}\n\n\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\thandle3DSwitch={this.toggle3DView.bind(this)}\n\t\t\t\t/>\n\t\t\t\t<div className='content'>\n\t\t\t\t\t<InfoPanel\n\t\t\t\t\t\tcurve={curve}\n\t\t\t\t\t\topen={this.state.infoPanelOpen}\n\t\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\t/>\n\t\t\t\t\t<MainView\n\t\t\t\t\t\tcurve={curve}\n\t\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}