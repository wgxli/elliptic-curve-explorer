{"version":3,"sources":["math/display.js","components/ControlBar/Equation/Term/Term.js","components/ControlBar/Equation/Equation.js","components/ControlBar/ControlBar.js","components/DisplayEquation.js","components/InfoPanel/InfoCard.js","components/InfoPanel/cards/Reduction.js","components/InfoPanel/cards/GroupStructure.js","components/InfoPanel/InfoPanel.js","math/analysis.js","math/graphics.js","components/MainView/scene.js","components/MainView/transitions.js","components/MainView/render.js","components/MainView/MainView.js","math/bigRational.js","math/affineMap.js","math/reduce.js","math/numberTheory.js","math/rationalPoint.js","math/curve.js","theme.js","App.js","serviceWorker.js","index.js"],"names":["renderCoefficient","n","hideUnit","arguments","length","undefined","first","sign","lt","bigInt","zero","minus","eq","renderTerm","monomial","_renderCoefficient","_renderCoefficient2","Object","slicedToArray","coefficient","join","renderPolynomial","coefficients","monomials","terms","i","term","push","Term","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","pointerDown","e","delta","deltaY","props","setCoefficient","plus","preventDefault","ReactDOM","findDOMNode","setPointerCapture","pointerId","startCoefficient","startX","clientX","deltaX","Math","round","releasePointerCapture","handleClick","console","log","classes","react_default","a","createElement","className","onWheel","handleWheel","bind","onPointerDown","handlePointerDown","onPointerMove","handlePointerMove","onPointerUp","handlePointerUp","react_katex","PureComponent","affine_monomials","homogeneous_monomials","Equation","v","Equation_Term_Term","key","getCoefficientSetter","homogeneous","mobileBreak","concat","renderTerms","ControlBar","AppBar_default","appBar","Toolbar_default","controlBar","disableGutters","IconButton_default","onClick","handleMenuButton","Menu_default","ControlBar_Equation_Equation","curve","view3D","Switch_default","checked","onChange","handle3DSwitch","color","withStyles","theme","zIndex","backgroundColor","flexDirection","DisplayEquation","latex","children","map","toString","x","style","fontSize","overflowX","overflowY","width","whiteSpace","math","InfoCard","Card_default","CardContent_default","Typography_default","variant","component","gutterBottom","title","ExpansionPanel","state","expanded","setState","marginBottom","buttonContainer","spacer","expandButton","expandOpen","expandClosed","toggleOpen","ExpandMore_default","Collapse_default","in","S_ExpansionPanel","transition","transitions","create","duration","short","transform","display","flexGrow","Reduction","reduced","curve_basis","_reduced$coefficients","b","map_basis","multiplier","denominator","discriminant","factorization","output","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_ref","value","_ref2","k","err","return","renderFactorization","discriminantFactorization","InfoPanel_InfoCard","components_DisplayEquation","slice","displayPoint","point","inverseMap","isIdentity","_inverseMap$transform","transformBigRational","y","_inverseMap$transform2","GroupStructure","torsionPoints","inverse","order","p","sort","group","orders","Z","cyclic","includes","renderTorsionPoints","InfoPanel","Drawer_default","open","infoPanel","paper","infoPanelPaper","toolbar","cards_Reduction","cards_GroupStructure","mixins","withTheme","findRoots","cbrt","pow","roots","alpha","sqrt","beta","acos","cos","PI","SEGMENTS","INFINITY","affineCurveGeometry","_curve$map","toJSNumber","_curve$map2","f","isNaN","xLists","multiComponent","shift","extremum","root","local_scale","max","abs","points","sinh","componentSize","pointsA","omegaA","radiusA","centerA","multiplierB","pointsB","apply","affineCurvePoints","xList","yList","reversePoints","reverse","_i","_output","X","Y","transformFloat","array","Float32Array","pushPoints","z","norm","curveSurfaceGeometry","affinePoints","index","loopPoints","nPoints","mainPoints","offset","curr","last","orbitControls","scene","THREE","camera","window","innerWidth","innerHeight","curveLineMaterial","linewidth","curveLineGeoA","addAttribute","curveLineA","add","curveLineGeoB","curveLineB","axesMaterial","axesGeo","axes","position","setY","yAxisMaterial","transparent","opacity","yAxisGeo","yAxis","visible","curveSurfaceMaterial","side","curveSurfaceGeo","geoPoints","setIndex","curveSurface","planeMaterial","planeGeo","plane","rotateX","ambientLight","directionalLight","target","set","light","toggle3DList","EPSILON","cubicEase","cosineEase","start3DTransition","SCENE","enabled","now","Date","getTime","cameraTarget","clone","cameraPosition","sub","cameraDistance","initialQuaternion","quaternion","targetQuaternion","normalize","unshift","t","start","stop","radius","q0","q1","slerp","newPosition","applyQuaternion","copy","updateProjectionMatrix","orbitCameraTransition","shiftAxesTransition","material","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","obj","toggleSurfacesTransition","enableControlsTransition","targetTime","controls","enableRotate","enableDamping","mouseButtons","LEFT","RIGHT","renderer","initialized","handleResize","setSize","aspect","initialize","canvas","document","getElementById","antialias","logarithmicDepthBuffer","setPixelRatio","devicePixelRatio","addEventListener","initializeRenderer","OrbitControls","dampingFactor","rotateSpeed","screenSpacePanning","TRANS","animate","requestAnimationFrame","render","update","uxScale","scale","setScalar","running","pop","MainView","renderScene","newView3D","curveGeo","geoA","geometry","posA","attributes","geoB","posB","copyArray","needsUpdate","computeBoundingSphere","surfaceGeo","surfacePos","_curveSurfaceGeometry","_curveSurfaceGeometry2","computeVertexNormals","updateCurve","id","BigRational","numerator","d","reduce","gcd","divide","other","times","negate","reciprocal","exponent","powers","answer","gt","AffineMap","_this$coefficients","c","_other$coefficients","A","B","C","D","E","F","_this$coefficients2","determinant","den","_this$coefficients$ma","_this$coefficients$ma2","_this$coefficients$ma3","_this$coefficients$ma4","_this$coefficients3","mapString","IdentityMap","functions","reduceFull","_curve","_curve2","_curve3","one","leq","isDivisibleBy","overallMap","_f","_f2","compose","sieve","Array","fill","j","small_primes","RationalPoint","reducedCurve","Number","NaN","getIdentity","slope","_this$curve$coefficie","_this$curve$coefficie2","intercept","quadratic","syntheticDivide","substitute","_loop","_ret","Infinity","remainder","Curve","_len","_key","computeReduction","computeTorsionPoints","_reduceFull","_reduceFull2","ReducedCurve","_getPrototypeOf2","toConsumableArray","_i2","_small_primes","prime","factor","_this2","computeDiscriminant","candidates","getCandidateTorsionPoints","construct","isFinite","yCandidates","currentCandidates","_yCandidates","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_this$coefficients4","createMuiTheme","palette","primary","blue","App","infoPanelOpen","helpPanelOpen","styles","components_ControlBar_ControlBar","toggleInfoPanel","handleHelpButton","toggleHelpPanel","toggle3DView","components_InfoPanel_InfoPanel","components_MainView_MainView","Boolean","location","hostname","match","src_App_0","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.071db824.chunk.js","sourcesContent":["import bigInt from 'big-integer';\n\n\nfunction renderCoefficient(n, hideUnit=true, first=false) {\n\tvar sign = n.lt(0) ? '-' : '+';\n\n\tif (first && sign === '+') {\n\t\tsign = '';\n\t}\n\n\tif (n.lt(0)) {\n\t\tn = bigInt.zero.minus(n);\n\t}\n\n\tif (n.eq(1) && hideUnit) {\n\t\tn = '';\n\t}\n\n\treturn [sign, n];\n}\n\n\nfunction renderTerm(n, monomial='', first=false) {\n\tn = bigInt(n);\n\tconst [sign, coefficient] = renderCoefficient(\n\t\tn, (monomial !== ''), first);\n\n\tif (n.eq(0)) {\n\t\treturn '';\n\t} else {\n\t\treturn [sign, coefficient, monomial].join('');\n\t}\n}\n\nfunction renderPolynomial(coefficients, monomials, first=true) {\n\tconst terms = []\n\n\tfor (var i=0; i < coefficients.length; i++) {\n\t\tconst term = renderTerm(coefficients[i], monomials[i], first);\n\t\tif (term !== '') {\n\t\t\tterms.push(term);\n\t\t\tfirst = false;\n\t\t}\n\t}\n\treturn terms.join('');\n}\n\nfunction renderFactorization(factorization) {\n\tconst output = [];\n\t\n\tfor (var [k, v] of factorization) {\n\t\tif (v === 1) {\n\t\t\toutput.push(k);\n\t\t} else {\n\t\t\toutput.push(k + '^{' + v + '}');\n\t\t}\n\t}\n\n\treturn output.join('\\\\cdot');\n}\n\n\nexport {\n\trenderCoefficient,\n\trenderTerm,\n\trenderPolynomial,\n\trenderFactorization\n};\n","import React, {PureComponent} from 'react';\nimport ReactDOM from 'react-dom';\nimport {InlineMath} from 'react-katex';\n\nimport bigInt from 'big-integer';\n\nimport {renderCoefficient} from 'math/display.js';\n\n\nclass Term extends PureComponent {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.pointerDown = false;\n\t}\n\n\thandleWheel(e) {\n\t\tconst delta = (e.deltaY > 0) ? bigInt(-1) : bigInt(1);\n\t\tthis.props.setCoefficient(this.props.coefficient.plus(delta));\n\t}\n\n\t/* Number Scrubbing */\n\thandlePointerDown(e) {\n\t\te.preventDefault();\n\t\tconst node = ReactDOM.findDOMNode(this);\n\t\tnode.setPointerCapture(e.pointerId);\n\t\tthis.pointerDown = true;\n\n\t\tthis.startCoefficient = this.props.coefficient;\n\t\tthis.startX = e.clientX;\n\t}\n\n\thandlePointerMove(e) {\n\t\tif (!this.pointerDown) {return;}\n\t\te.preventDefault();\n\t\tconst deltaX = e.clientX - this.startX;\n\t\tconst delta = bigInt(Math.round(deltaX / 10));\n\t\tthis.props.setCoefficient(this.startCoefficient.plus(delta));\n\t}\n\n\thandlePointerUp(e) {\n\t\te.preventDefault();\n\t\tconst node = ReactDOM.findDOMNode(this);\n\t\tnode.releasePointerCapture(e.pointerId);\n\t\tthis.pointerDown = false;\n\n\t\tif (this.startX === e.clientX) {this.handleClick(e);}\n\t}\n\n\t/* Manual Entry */\n\thandleClick(e) {\n\t\tconsole.log('click');\n\t}\n\n\trender() {\n\t\tconst [sign, coefficient] = renderCoefficient(\n\t\t\tthis.props.coefficient,\n\t\t\tthis.props.monomial !== '',\n\t\t\tthis.props.first\n\t\t);\n\n\n\t\tvar classes = 'equation-term';\n\t\tif (this.props.coefficient.eq(0)) {\n\t\t\tclasses += ' faded';\n\t\t}\n\t\treturn (\n\t\t\t<span\n\t\t\t\tclassName={classes}\n\t\t\t\tonWheel={this.handleWheel.bind(this)}\n\t\t\t\tonPointerDown={this.handlePointerDown.bind(this)}\n\t\t\t\tonPointerMove={this.handlePointerMove.bind(this)}\n\t\t\t\tonPointerUp={this.handlePointerUp.bind(this)}\n\t\t\t>\n\t\t\t\t<InlineMath>\n\t\t\t\t\t{sign + '~' + coefficient + this.props.monomial}\n\t\t\t\t</InlineMath>\n\t\t\t</span>);\n\t}\n}\n\nexport default Term;\n","import React, {PureComponent} from 'react';\nimport {InlineMath} from 'react-katex';\n\nimport Term from './Term/Term.js';\nimport './Equation.css';\n\n\nconst affine_monomials = [\n\t'y^2', 'xy', 'y',\n\t'x^3', 'x^2', 'x', ''];\nconst homogeneous_monomials = [\n\t'y^2z', 'xyz', 'yz^2',\n\t'x^3', 'x^2z', 'xz^2', 'z^3'];\n\nclass Equation extends PureComponent {\n\tgetCoefficientSetter(i) {\n\t\treturn (function(v) {\n\t\t\tthis.props.setCoefficient(i, v);\n\t\t}).bind(this);\n\t}\n\n\trenderTerm(i, monomial) {\n\t\treturn (\n\t\t\t<Term\n\t\t\t\tkey={i}\n\t\t\t\tcoefficient={this.props.coefficients[i]}\n\t\t\t\tmonomial={monomial}\n\t\t\t\tsetCoefficient={this.getCoefficientSetter(i)}\n\t\t\t/>);\n\t}\n\n\trenderTerms() {\n\t\tconst monomials = this.props.homogeneous ? homogeneous_monomials : affine_monomials;\n\t\tconst mobileBreak = <span key='mobileBreak' className='mobile-break'/>;\n\n\t\tconst terms = [\n\t\t\t<InlineMath key={-1}>{monomials[0]}</InlineMath>,\n\t\t\tthis.renderTerm(0, monomials[1]),\n\t\t\tthis.renderTerm(2, monomials[2]),\n\t\t\tmobileBreak,\n\t\t\t<InlineMath key={-2}>{`~= ${monomials[3]}`}</InlineMath>,\n\t\t\tthis.renderTerm(1, monomials[4]),\n\t\t\tthis.renderTerm(3, monomials[5]),\n\t\t\tthis.renderTerm(4, monomials[6]),\n\t\t];\n\t\treturn terms;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className='main-equation'>\n\t\t\t\t\t{this.renderTerms()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Equation;\n","import React, {PureComponent} from 'react';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Switch from '@material-ui/core/Switch';\n//import Button from '@material-ui/core/Button';\n\n\nimport {withStyles} from '@material-ui/core/styles';\n\nimport Equation from './Equation/Equation.js';\nimport './ControlBar.css';\n\nconst styles = theme => ({\n\tappBar: {\n\t\tzIndex: 5000\n\t},\n\tcontrolBar: {\n\t\tbackgroundColor: 'white',\n\t\tcolor: 'black',\n\t\tflexDirection: 'row',\n\t}\n});\n\nclass ControlBar extends PureComponent {\n\trender() {\n\t\tconst classes = this.props.classes;\n\t\treturn (\n\t\t\t<AppBar className={classes.appBar}>\n\t\t\t\t<Toolbar\n\t\t\t\t\tclassName={classes.controlBar + ' control-bar'}\n\t\t\t\t\tdisableGutters\n\t\t\t\t>\n\t\t\t\t\t<IconButton onClick={this.props.handleMenuButton}>\n\t\t\t\t\t\t<MenuIcon/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<div className='spacer'/>\n\t\t\t\t\t<div className='equation-container'>\n\t\t\t\t\t\t<Equation\n\t\t\t\t\t\t\tcoefficients={this.props.curve.coefficients}\n\t\t\t\t\t\t\tsetCoefficient={this.props.setCoefficient}\n\t\t\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='spacer'/>\n\t\t\t\t\t<span className='options'>\n\t\t\t\t\t\t2D\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={this.props.view3D}\n\t\t\t\t\t\t\tonChange={this.props.handle3DSwitch}\n\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t3D\n\t\t\t\t\t</span>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles)(ControlBar);\n","import React, {PureComponent} from 'react';\n\nimport {InlineMath} from 'react-katex';\n\n\nclass DisplayEquation extends PureComponent {\n\trender() {\n\t\tvar latex;\n\t\tif (typeof this.props.children.map === 'undefined') {\n\t\t\tlatex = this.props.children.toString();\n\t\t} else {\n\t\t\tlatex = this.props.children.map((x) => x.toString()).join('');\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName='display-equation'\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: this.props.fontSize,\n\t\t\t\t\toverflowX: 'auto',\n\t\t\t\t\toverflowY: 'hidden',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\twhiteSpace: 'nowrap'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<InlineMath math={latex}/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default DisplayEquation;\n","import React, {PureComponent} from 'react';\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\n\nimport {withStyles} from '@material-ui/core/styles';\n\nconst styles = (theme) => ({\n\texpandButton: {\n\t\ttransition: theme.transitions.create('transform', {\n\t\t\tduration: theme.transitions.duration.short\n\t\t})\n\t},\n\texpandClosed: {\n\t\ttransform: 'rotate(0deg)',\n\t},\n\texpandOpen: {\n\t\ttransform: 'rotate(180deg)',\n\t},\n\n\tbuttonContainer: {\n\t\tdisplay: 'flex'\n\t},\n\tspacer: {\n\t\tflexGrow: 1\n\t}\n});\n\n\nclass InfoCard extends PureComponent {\n\trender() {\n\t\treturn (\n\t\t\t<Card className='info-card'>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography variant='h5' component='h2' gutterBottom>\n\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\nclass ExpansionPanel extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {expanded: false};\n\t}\n\n\ttoggleOpen() {\n\t\tthis.setState({expanded: !this.state.expanded});\n\t}\n\n\trender() {\n\t\tconst classes = this.props.classes;\n\n\t\treturn (\n\t\t\t<div style={{marginBottom: '-12px'}}>\n\t\t\t\t<div className={classes.buttonContainer}>\n\t\t\t\t\t<div className={classes.spacer}/>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tclasses.expandButton\n\t\t\t\t\t\t\t+ ' ' + (this.state.expanded ?\n\t\t\t\t\t\t\tclasses.expandOpen : classes.expandClosed)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonClick={this.toggleOpen.bind(this)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ExpandMoreIcon/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</div>\n\t\t\t\t<Collapse in={this.state.expanded}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Collapse>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst S_ExpansionPanel = withStyles(styles)(ExpansionPanel);\n\nexport default InfoCard;\nexport {S_ExpansionPanel as ExpansionPanel};\n","import React, {PureComponent} from 'react';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport DisplayEquation from 'components/DisplayEquation.js';\nimport {renderPolynomial, renderFactorization} from 'math/display.js';\n\nimport InfoCard, {ExpansionPanel} from '../InfoCard.js';\n\n\nclass Reduction extends PureComponent {\n\trender() {\n\t\tconst reduced = this.props.curve.reduced;\n\n\t\t/***** Render Curve *****/\n\t\tconst homogeneous = this.props.homogeneous;\n\t\tconst curve_basis = homogeneous ? ['X^3', 'XZ^2', 'Z^3'] : ['X^3', 'X', ''];\n\t\tconst [a, b] = reduced.coefficients;\n\n\t\t/***** Render Mapping *****/\n\t\tconst map = reduced.map;\n\t\tconst map_basis = homogeneous ? ['x', 'y', 'z'] : ['x', 'y', ''];\n\t\tconst multiplier = (map.denominator.eq(1))\n\t\t\t? '' : `\\\\frac{1}{${map.denominator}}`;\n\n\t\t/***** Render Discriminant *****/\n\t\tconst discriminant = reduced.discriminant;\n\t\tvar factorization = renderFactorization(\n\t\t\treduced.discriminantFactorization);\n\t\tif (discriminant.lt(0)) {\n\t\t\tfactorization = '-' + factorization;\n\t\t}\n\n\t\treturn (\n\t\t\t<InfoCard title='Reduced Form'>\n\t\t\t\t<DisplayEquation fontSize={28}>\n\t\t\t\t\t\t{homogeneous ? 'Y^2 Z' : 'Y^2'}\n\t\t\t\t\t\t=\n\t\t\t\t\t\t{renderPolynomial([1, a, b], curve_basis)}\n\t\t\t\t</DisplayEquation>\n\t\t\t\t<ExpansionPanel>\n\t\t\t\t\t<Typography variant='caption'>Mapping</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={20}>\n\t\t\t\t\t\t{homogeneous ? '[X:Y:Z]' : '(X, Y)'}\n\t\t\t\t\t\t=\n\t\t\t\t\t\t{multiplier + (homogeneous ? '[' : '(')}\n\t\t\t\t\t\t{renderPolynomial(\n\t\t\t\t\t\t\tmap.coefficients.slice(0, 3), map_basis)}\n\t\t\t\t\t\t{homogeneous ? ':' : ','}\n\t\t\t\t\t\t{renderPolynomial(\n\t\t\t\t\t\t\tmap.coefficients.slice(3, 6), map_basis)}\n\t\t\t\t\t\t{homogeneous ? ':z]' : ')'}\n\t\t\t\t\t</DisplayEquation>\n\n\t\t\t\t\t<Typography variant='caption'>Discriminant</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={20}>\n\t\t\t\t\t\t{'\\\\begin{aligned}'}\n\t\t\t\t\t\t\t\\Delta &=\n\t\t\t\t\t\t\t{discriminant}\n\t\t\t\t\t\t\t{discriminant.eq(0) ? ''\n\t\t\t\t\t\t\t\t\t: ('\\\\\\\\ &=' + factorization)}\n\t\t\t\t\t\t{'\\\\end{aligned}'}\n\t\t\t\t\t</DisplayEquation>\n\t\t\t\t</ExpansionPanel>\n\t\t\t</InfoCard>\n\t\t);\n\t}\n}\n\nexport default Reduction;\n","import React, {PureComponent} from 'react';\n\nimport Typography from '@material-ui/core/Typography';\n\nimport DisplayEquation from 'components/DisplayEquation.js';\n\nimport InfoCard, {ExpansionPanel} from '../InfoCard.js';\n\n\nfunction displayPoint(point, inverseMap, homogeneous) {\n\tif (point.isIdentity()) {\n\t\treturn homogeneous ? '[0 : 1 : 0]' : '\\\\infty';\n\t}\n\n\tconst [x, y] = inverseMap.transformBigRational(point.x, point.y);\n\tif (homogeneous) {\n\t\treturn `[${x}:${y}:1]`;\n\t} else {\n\t\treturn `(${x}, ${y})`;\n\t}\n}\n\nclass GroupStructure extends PureComponent {\n\trenderTorsionPoints(torsionPoints) {\n\n\t\t// Render table\n\t\tconst inverseMap = this.props.curve.reduced.map.inverse();\n\t\tconst output = [];\n\t\tfor (var [point, order] of torsionPoints) {\n\t\t\toutput.push(\n\t\t\t\tdisplayPoint(point, inverseMap, this.props.homogeneous)\n\t\t\t\t+ ' & ' + order\n\t\t\t);\n\t\t}\n\n\t\tconst header = '\\\\begin{array}{ll} \\\\text{Point} & \\\\text{Order} \\\\\\\\{}';\n\t\tconst footer = '\\\\end{array}';\n\t\treturn header + output.join('\\\\\\\\{}') + footer;\n\t}\n\n\trender() {\n\t\tconst reduced = this.props.curve.reduced;\n\t\tif (reduced.discriminant.eq(0)) {\n\t\t\treturn (<div/>);\n\t\t}\n\n\t\t// Torsion subgroup\n\t\tconst order = reduced.torsionPoints.length;\n\t\tconst torsionPoints = this.props.curve.reduced.torsionPoints.map(\n\t\t\t(p) => [p, p.order()]\n\t\t);\n\t\ttorsionPoints.sort((a, b) => a[1] - b[1]);\n\t\tconst orders = torsionPoints.map((x) => x[1]);\n\n\t\tconst Z = '\\\\mathbb{Z}'\n\t\tconst cyclic = (n) => Z + '_{' + n + '}';\n\t\tvar group;\n\t\tif (order === 1) {\n\t\t\tgroup = Z + '^r';\n\t\t} else if ([2, 3, 5, 6, 7, 9].includes(order)) {\n\t\t\tgroup = cyclic(order);\n\t\t} else {\n\t\t\tgroup = orders.includes(order)\n\t\t\t\t? cyclic(order)\n\t\t\t\t: '(' + cyclic(order/2) + '\\\\times' + cyclic(2) + ')';\n\t\t}\n\n\t\tif (order !== 1) {\n\t\t\tgroup += '\\\\times ' + Z + '^r';\n\t\t}\n\n\n\t\treturn (\n\t\t\t<InfoCard title='Group Structure'>\n\t\t\t\t<DisplayEquation fontSize={28}>\n\t\t\t\t\t{'E(\\\\mathbb{Q}) \\\\cong' + group}\n\t\t\t\t</DisplayEquation>\n\t\t\t\t<ExpansionPanel>\n\t\t\t\t\t<Typography variant='caption'>Torsion Points</Typography>\n\t\t\t\t\t<DisplayEquation fontSize={18}>\n\t\t\t\t\t\t{this.renderTorsionPoints(torsionPoints)}\n\t\t\t\t\t</DisplayEquation>\n\t\t\t\t</ExpansionPanel>\n\t\t\t</InfoCard>\n\t\t);\n\t}\n}\n\nexport default GroupStructure;\n","import React, {PureComponent} from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport {withStyles} from '@material-ui/core/styles';\n\nimport Reduction from './cards/Reduction.js';\nimport GroupStructure from './cards/GroupStructure.js';\n\nimport './InfoPanel.css';\n\n\nconst styles = (theme) => ({\n\tinfoPanelPaper: {\n\t\tbackgroundColor: '#EEE',\n\t\tdisplay: 'block'\n\t},\n\ttoolbar: theme.mixins.toolbar\n});\n\nclass InfoPanel extends PureComponent {\n\trender() {\n\t\tconst classes = this.props.classes;\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\topen={this.props.open}\n\t\t\t\tvariant='persistent'\n\t\t\t\tclassName={classes.infoPanel}\n\t\t\t\tclasses={{\n\t\t\t\t\tpaper: classes.infoPanelPaper + ' info-panel-paper'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className={classes.toolbar + ' toolbar-padding'}/>\n\t\t\t\t<Reduction\n\t\t\t\t\tcurve={this.props.curve}\n\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t/>\n\t\t\t\t<GroupStructure\n\t\t\t\t\tcurve={this.props.curve}\n\t\t\t\t\thomogeneous={this.props.view3D}\n\t\t\t\t/>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n\nexport default withStyles(styles, {withTheme: true})(InfoPanel);\n","/*\n * Finds the real roots of f(x) = x^3 + ax + b.\n */\nfunction findRoots(a, b) {\n\tif (a === 0) {\n\t\treturn [-Math.cbrt(b)];\n\t}\n\n\tconst discriminant = -16 * (4*Math.pow(a, 3) + 27*Math.pow(b, 2));\n\n\tif (discriminant === 0) {\n\t\t// Multiple root\n\t\tconst roots = [3*b/a, -3*b/(2*a)];\n\t\troots.sort((a, b) => a-b);\n\t\treturn roots;\n\t} else if (discriminant > 0) {\n\t\t// Three real roots\n\t\t// Viete's solution to the cubic\n\t\tconst alpha = Math.sqrt(-3/a);\n\t\tconst beta = Math.acos(3*b/(2*a) * alpha);\n\t\tconst roots = []\n\n\t\tfor (var k=0; k<3; k++) {\n\t\t\troots.push(2 * Math.cos(\n\t\t\t\t(beta - 2*Math.PI*k)/3\n\t\t\t) / alpha);\n\t\t}\n\t\troots.sort((a, b) => a-b);\n\t\treturn roots;\n\t} else {\n\t\t// One real root\n\t\t// Cardano's formula\n\t\tconst alpha = Math.sqrt(discriminant / (-16 * 4 * 27));\n\t\tconst root = Math.cbrt(-b/2 + alpha) + Math.cbrt(-b/2 - alpha);\n\t\treturn [root];\n\t}\n}\n\nexport {findRoots};\n","import {findRoots} from './analysis.js';\n\n\nconst SEGMENTS = 128;\nconst INFINITY = 1e5;\n\nfunction norm(x, z) {\n\treturn 1/Math.max(Math.abs(x), Math.abs(z), 1);\n}\n\nfunction affineCurvePoints(a, b) {\n\tconst roots = findRoots(a, b);\n\tconst f = (x) => Math.pow(x, 3) + a*x + b;\n\tvar multiComponent = true;\n\n\t// Expand double root to three (non-unique) roots\n\tif (roots.length === 2) {\n\t\tmultiComponent = false;\n\t\tconst x = (roots[0] + roots[1]) / 2;\n\t\tif (f(x) > 0) {\n\t\t\troots.push(roots[1]);\n\t\t} else {\n\t\t\troots.shift();\n\t\t}\n\t}\n\n\t// Expand single root if curve has local extrema\n\tif (roots.length === 1 && a < 0) {\n\t\tconst extremum = Math.sqrt(-a/3);\n\t\tif (f(extremum) > 0){\n\t\t\tmultiComponent = false;\n\t\t\troots.push(extremum, extremum);\n\t\t}\n\t}\n\n\tif (roots.length === 1) {\n\t\t// Single component\n\t\tconst root = roots[0];\n\t\tconst local_scale = Math.max(Math.abs(root), 1)/200;\n\t\tconst multiplier = 15/SEGMENTS;\n\n\t\tconst points = [];\n\t\tfor (var i = 0; i < SEGMENTS-1; i++) {\n\t\t\tpoints.push(root + local_scale * Math.sinh(i * multiplier));\n\t\t}\n\t\tpoints.push(INFINITY);\n\t\treturn [points];\n\t} else {\n\t\t// Choose array componentSizes for each component\n\t\t// Depending on whether curve itself is multi-component\n\t\tconst componentSize = multiComponent ? SEGMENTS : SEGMENTS/2;\n\n\t\t// First component\n\t\tconst pointsA = [roots[0]];\n\t\tconst omegaA = Math.PI / (componentSize-2);\n\t\tconst radiusA = (roots[1] - roots[0])/2;\n\t\tconst centerA = (roots[0] + roots[1])/2;\n\t\tfor (i = 0; i < componentSize-2; i++) {\n\t\t\tpointsA.push(\n\t\t\t\tcenterA - radiusA * \n\t\t\t\tMath.cos(i * omegaA)\n\t\t\t);\n\t\t}\n\t\tpointsA.push(roots[1]);\n\n\t\t// Second component\n\t\tconst local_scale = Math.max(Math.abs(roots[2] - roots[0]), 1)/200;\n\t\tconst multiplierB = 15/componentSize;\n\n\t\tconst pointsB = [];\n\t\tfor (i = 0; i < componentSize-1; i++) {\n\t\t\tpointsB.push(roots[2]\n\t\t\t\t+ local_scale * Math.sinh(i * multiplierB));\n\t\t}\n\t\tpointsB.push(INFINITY);\n\n\t\tif (multiComponent) {\n\t\t\treturn [pointsA, pointsB];\n\t\t} else {\n\t\t\tpointsA.push(...pointsB);\n\t\t\treturn [pointsA];\n\t\t}\n\t}\n}\n\n\n/*\n * Returns a buffer array representing the graph of the given curve.\n * The array should be interpreted in groups of six,\n * each group representing the start and end coordinates\n * of a single line segment.\n *\n * Input is the 'reduced' attribute of a Curve.\n */\nfunction affineCurveGeometry(reduced) {\n\tconst output = [];\n\n\tif (typeof reduced === 'undefined') {\n\t\treduced = {coefficients: undefined, map: undefined};\n\t}\n\n\tconst curve = reduced.coefficients;\n\tconst map = reduced.map;\n\n\t// Placeholder for empty curve\n\tif (typeof curve !== 'undefined') {\n\t\t// Reduce given curve\n\t\tconst [a, b] = curve.map((x) => x.toJSNumber());\n\t\tconst f = (function(x) {\n\t\t\tconst y = Math.sqrt(Math.pow(x, 3) + a*x + b);\n\t\t\treturn isNaN(y) ? 0 : y;\n\t\t});\n\n\t\t// Construct geometry\n\t\tconst xLists = affineCurvePoints(a, b);\n\t\tfor (var xList of xLists) {\n\t\t\tconst yList = xList.map(f);\n\t\t\tconst points = [];\n\t\t\tconst reversePoints = [];\n\n\t\t\t// Construct appropriate points\n\t\t\tfor (var i=0; i < xList.length; i++) {\n\t\t\t\tpoints.push(xList[i], 1, yList[i]);\n\t\t\t\treversePoints.push(-yList[i], 1, xList[i]);\n\t\t\t}\n\t\t\treversePoints.reverse();\n\t\t\treversePoints.push(...points);\n\t\t\toutput.push(reversePoints);\n\t\t}\n\n\t\t// Transform under affine map\n\t\tconst inverseMap = map.inverse();\n\t\tfor (var component of output) {\n\t\t\tfor (i=0; i<component.length; i += 3) {\n\t\t\t\tconst [X, Y] = [component[i], component[i+2]];\n\t\t\t\tconst [x, y] = inverseMap.transformFloat(X, Y);\n\t\t\t\tcomponent[i] = x;\n\t\t\t\tcomponent[i+2] = y;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst array = [];\n\t\twhile (array.length < SEGMENTS*6) {\n\t\t\tarray.push(0, 0, 0);\n\t\t}\n\t\toutput.push(array);\n\t}\n\treturn output.map((x) => new Float32Array(x));\n}\n\n\n/*\n * Helper function for curveSurfaceGeometry.\n */\nfunction pushPoints(array, x, z) {\n\tconst alpha = norm(x, z);\n\tx *= alpha;\n\tz *= alpha;\n\n\tarray.push(0, 0, 0, x, alpha, z);\n\tarray.push(0, 0, 0, -x, -alpha, -z);\n}\n\n\n/*\n * Constructs the geometry for the curve surface\n * in projective space (3D view).\n *\n * Returns an index array and a Float32Array representing\n * the positions of the points.\n *\n * The position array should be read in groups of three,\n * each representing the xyz coordinates of a vertex in the geometry.\n *\n * If the curve contains two connected components,\n * the first half of the position array corresponds to the\n * \"loop\" component, while the second half corresponds to\n * the unbounded component.\n *\n * If the curve contains one connected component,\n * the second half of the position array will be padded with zeros.\n *\n * For performance reasons, the output of\n * affineCurveGeometry(curve) is passed as an argument.\n */\nfunction curveSurfaceGeometry(affinePoints) {\n\tconst output = [];\n\tconst index = [];\n\n\tif (typeof affinePoints === 'undefined') {\n\t\taffinePoints = affineCurveGeometry();\n\t}\n\n\tif (affinePoints.length === 2) {\n\t\t/*** Construct loop component ***/\n\t\tconst loopPoints = affinePoints.shift();\n\t\tconst nPoints = loopPoints.length/3;\n\n\t\tfor (var i = 0; i < nPoints; i++) {\n\t\t\tpushPoints(output,\n\t\t\t\tloopPoints[3*i],\n\t\t\t\tloopPoints[3*i+2]);\n\t\t\tindex.push(4*i, 4*i+1, (4*i+5) % (4*nPoints));\n\t\t\tindex.push(4*i+2, 4*i+3, (4*i+7) % (4*nPoints));\n\t\t}\n\t}\n\n\t/*** Construct unbounded component ***/\n\tconst mainPoints = affinePoints[0];\n\tconst nPoints = mainPoints.length/3;\n\tconst offset = 2*index.length/3;\n\n\t// Add points to geometry\n\tfor (i = 0; i < mainPoints.length; i += 3) {\n\t\tpushPoints(output, mainPoints[i], mainPoints[i+2]);\n\t}\n\n\t// Add appropriate indexed triangles\n\tfor (i = 0; i < nPoints - 1; i++) {\n\t\tconst curr = offset + 4*i;\n\t\tindex.push(curr,   curr+1, curr+5);\n\t\tindex.push(curr+2, curr+3, curr+7);\n\t}\n\n\t// Add two indexed triangles for projective point at infinity\n\tconst last = offset + 4*nPoints - 1;\n\tindex.push(last-1, last, offset+1);\n\tindex.push(last-3, last-2, offset+3);\n\n\twhile (output.length < SEGMENTS * 48) {\n\t\toutput.push(0, 0, 0);\n\t}\n\treturn [index, new Float32Array(output)];\n}\n\nexport {affineCurveGeometry, curveSurfaceGeometry};\n","import * as THREE from 'three';\nimport OrbitControls from 'three-orbitcontrols';\n\nimport {\n\taffineCurveGeometry, curveSurfaceGeometry\n} from 'math/graphics.js';\n\n/***** Setup *****/\nconst scene = new THREE.Scene();\nconst camera = new THREE.PerspectiveCamera(\n\t75, window.innerWidth/window.innerHeight,\n\t1e-2, 1e8);\nvar orbitControls;\n\nconst CURVE_COLOR = 0x66B5F3;\n\n\n\n/***** Main Scene *****/\n/** Elliptic curve **/\nconst curveLineMaterial = new THREE.LineBasicMaterial({\n\tcolor: CURVE_COLOR, linewidth: 4});\n\n// Loop component of two-component elliptic curve (optional)\nconst curveLineGeoA = new THREE.BufferGeometry();\ncurveLineGeoA.addAttribute('position',\n\tnew THREE.BufferAttribute(affineCurveGeometry()[0], 3)\n);\nconst curveLineA = new THREE.LineLoop(curveLineGeoA, curveLineMaterial);\nscene.add(curveLineA);\n\n// Unbounded component elliptic curve\nconst curveLineGeoB = new THREE.BufferGeometry();\ncurveLineGeoB.addAttribute('position',\n\tnew THREE.BufferAttribute(affineCurveGeometry()[0], 3)\n);\nconst curveLineB = new THREE.Line(curveLineGeoB, curveLineMaterial);\nscene.add(curveLineB);\n\n/** Coordinate Axes **/\n// Main (xz) axes\nconst axesMaterial = new THREE.LineBasicMaterial({color: 0xFFFFFF});\nconst axesGeo = new THREE.BufferGeometry();\naxesGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(new Float32Array([\n\t\t-1, 0, 0, 1, 0, 0, 0, 0, -1, 0, 0, 1\n\t]), 3)\n);\nconst axes = new THREE.LineSegments(axesGeo, axesMaterial);\naxes.position.setY(0.99);\nscene.add(axes);\n\n// y-axis (only visible in 3D)\nconst yAxisMaterial = new THREE.LineBasicMaterial({\n\tcolor: 0xFFFFFF, transparent: true, opacity: 0});\nconst yAxisGeo = new THREE.BufferGeometry();\nyAxisGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(new Float32Array([0, -1, 0, 0, 1, 0]), 3)\n);\nconst yAxis = new THREE.Line(yAxisGeo, yAxisMaterial);\nyAxis.visible = false;\nscene.add(yAxis);\n\n/** Surfaces (3D) **/\n// Projective curve surface\nvar curveSurfaceMaterial = new THREE.MeshPhongMaterial({\n\tcolor: CURVE_COLOR, side: THREE.DoubleSide,\n\ttransparent: true, opacity: 0\n});\n\nconst curveSurfaceGeo = new THREE.BufferGeometry();\nconst [index, geoPoints] = curveSurfaceGeometry();\ncurveSurfaceGeo.setIndex(index);\ncurveSurfaceGeo.addAttribute('position',\n\tnew THREE.BufferAttribute(geoPoints, 3));\n\nconst curveSurface = new THREE.Mesh(curveSurfaceGeo, curveSurfaceMaterial);\ncurveSurface.visible = false;\nscene.add(curveSurface);\n\n\n// Plane at y=1\nconst planeMaterial = new THREE.MeshPhongMaterial({\n\tcolor: 0x888888, side: THREE.DoubleSide,\n\ttransparent: true, opacity: 0\n});\nconst planeGeo = new THREE.PlaneBufferGeometry(2, 2);\nconst plane = new THREE.Mesh(planeGeo, planeMaterial);\nplane.rotateX(Math.PI/2);\nplane.position.setY(1);\nscene.add(plane);\n\n\n/** Lights **/\nconst ambientLight = new THREE.AmbientLight(0x404040, 0.1);\nscene.add(ambientLight);\n\nconst directionalLight = new THREE.DirectionalLight(0xFFFFFF, 0.3);\ndirectionalLight.target.position.set(5, 0, -1);\nscene.add(directionalLight);\nscene.add(directionalLight.target);\n\nconst light = new THREE.PointLight(0xFFFFFF, 0.7);\nscene.add(light);\n\n/*\nconst testCube = new THREE.Mesh(\n\tnew THREE.BoxBufferGeometry(1, 1, 1),\n\tnew THREE.MeshLambertMaterial({color: 0xFF0000})\n);\nscene.add(testCube);\n*/\n\n\n\n/***** API *****/\nfunction initialize() {\n\tconst canvas = document.getElementById('main-view');\n\n\t// Set initial camera state\n\tcamera.quaternion.set(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\tcamera.quaternion.normalize();\n\tcamera.position.set(0, 5, 0);\n\tcamera.updateProjectionMatrix();\n\n\t// Initialize orbit controls\n\torbitControls = new OrbitControls(camera, canvas);\n\torbitControls.dampingFactor = 0.15;\n\torbitControls.rotateSpeed = 0.15;\n\torbitControls.screenSpacePanning = true;\n}\n\nfunction update() {\n\tif (orbitControls.enabled) {orbitControls.update();}\n\n\tconst uxScale = 10 * Math.max(camera.position.length(), 0.1);\n\taxes.scale.setScalar(uxScale);\n\tplane.scale.setScalar(uxScale);\n\tyAxis.scale.setScalar(uxScale);\n\tcurveSurface.scale.setScalar(uxScale);\n\n\tlight.position.copy(camera.position);\n}\n\n// List of objects whose visibility depends on 2D/3D switch\nconst toggle3DList = [plane, yAxis, curveSurface];\n\nexport {\n\tinitialize, update,\n\ttoggle3DList,\n\n\tscene, camera, orbitControls,\n\tcurveLineA, curveLineB, curveSurface,\n\taxes, yAxis, plane\n};\n","import * as THREE from 'three';\nimport * as SCENE from './scene.js';\n\nvar transitions = [];\nconst EPSILON = 1e-5;\nconst cubicEase = (x) => (x > 1) ? 1 : (1-Math.pow(1-x, 3));\nconst cosineEase = (x) => (x > 1) ? 1 : (1-Math.cos(x * Math.PI))/2;\n\n/***** Helper Functions *****/\nfunction runTransitions() {\n\tconst running = [];\n\tconst now = (new Date()).getTime();\n\n\twhile (transitions.length > 0) {\n\t\tconst transition = transitions.pop();\n\t\tconst done = transition(now);\n\n\t\tif (!done) {\n\t\t\trunning.push(transition);\n\t\t}\n\t}\n\t\n\twhile (running.length > 0) {\n\t\ttransitions.push(running.pop());\n\t}\n}\n\n\n/***** BEGIN TRANSITIONS *****/\nfunction start3DTransition(view3D) {\n\tSCENE.orbitControls.enabled = false;\n\ttransitions = [];\n\n\tconst now = (new Date()).getTime();\n\tif (!view3D) {\n\t\tconst cameraTarget = SCENE.orbitControls.target.clone();\n\t\tconst cameraPosition = SCENE.camera.position.clone();\n\t\tcameraPosition.sub(cameraTarget);\n\t\tconst cameraDistance = cameraPosition.length();\n\n\t\tconst initialQuaternion = SCENE.camera.quaternion.clone();\n\t\tconst targetQuaternion = new THREE.Quaternion(\n\t\t\t-Math.sqrt(0.5) + EPSILON, 0, 0, Math.sqrt(0.5) + EPSILON);\n\t\ttargetQuaternion.normalize();\n\n\t\ttransitions.unshift(\n\t\t\t(t) => orbitCameraTransition(\n\t\t\t\tt, now, now + 300,\n\t\t\t\tcameraDistance, cameraTarget,\n\t\t\t\tinitialQuaternion, targetQuaternion\n\t\t\t)\n\t\t);\n\t}\n\n\t// Shift axes position\n\ttransitions.unshift(\n\t\t(t) => shiftAxesTransition(t, view3D, now, now + 300)\n\t);\n\n\t// Toggle surface visibility\n\tif (view3D) {\n\t\tfor (var obj of SCENE.toggle3DList) {\n\t\t\tobj.visible = true;\n\t\t}\n\t}\n\tSCENE.yAxis.transparent = true;\n\ttransitions.unshift(\n\t\t(t) => toggleSurfacesTransition(t, view3D, now, now + 300)\n\t);\n\n\t// Re-enable controls after delay\n\ttransitions.unshift(\n\t\t(t) => enableControlsTransition(t, view3D, now + 350)\n\t);\n}\n\nfunction orbitCameraTransition(\n\t\tnow, start, stop,\n\t\tradius, target,\n\t\tq0, q1) {\n\tconst camera = SCENE.camera;\n\tconst alpha = cosineEase((now-start) / (stop-start));\n\n\t// Compute new quaternion\n\tconst quaternion = q0.clone();\n\tquaternion.slerp(q1, alpha);\n\n\t// Compute new camera position\n\tconst newPosition = new THREE.Vector3(0, 0, radius);\n\tnewPosition.applyQuaternion(quaternion);\n\tnewPosition.add(target);\n\n\t// Update camera setup\n\tcamera.quaternion.copy(quaternion);\n\tcamera.position.copy(newPosition);\n\tcamera.updateProjectionMatrix();\n\treturn now > stop;\n}\n\n\nfunction shiftAxesTransition(now, view3D, start, stop) {\n\tconst alpha = cubicEase((now-start) / (stop-start));\n\tconst y = view3D ? (1-alpha) : alpha;\n\tSCENE.axes.position.setY(y);\n\treturn now > stop;\n}\n\nfunction toggleSurfacesTransition(now, view3D, start, stop) {\n\tconst alpha = cubicEase((now-start) / (stop-start));\n\tconst beta = view3D ? alpha : (1-alpha);\n\n\tSCENE.plane.material.opacity = 0.6 * beta;\n\tSCENE.curveSurface.material.opacity = 0.95 * beta;\n\tSCENE.yAxis.material.opacity = beta;\n\n\tif (now > stop) {\n\t\tif (!view3D) {\n\t\t\tfor (var obj of SCENE.toggle3DList) {\n\t\t\t\tobj.visible = false;\n\t\t\t}\n\t\t}\n\t\tSCENE.yAxis.transparent = false;\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\nfunction enableControlsTransition(now, view3D, targetTime) {\n\tif (now < targetTime) {\n\t\treturn false;\n\t} else {\n\t\tconst controls = SCENE.orbitControls;\n\n\t\t// Enable/disable approrpiate features\n\t\tcontrols.enableRotate = view3D;\n\t\tcontrols.enableDamping = view3D;\n\n\t\t// Swap controls mouse buttons\n\t\tif (view3D) {\n\t\t\tcontrols.mouseButtons.LEFT = THREE.MOUSE.LEFT;\n\t\t\tcontrols.mouseButtons.RIGHT = THREE.MOUSE.RIGHT\n\t\t} else {\n\t\t\tcontrols.mouseButtons.LEFT = THREE.MOUSE.RIGHT;\n\t\t\tcontrols.mouseButtons.RIGHT = THREE.MOUSE.LEFT;\n\t\t}\n\t\t\n\t\t// Raise or lower control target appropriately\n\t\tcontrols.target.setY(view3D ? 0 : 1);\n\t\t\n\t\tcontrols.enabled = true;\n\t\treturn true;\n\t}\n}\n\nexport {\n\trunTransitions,\n\tstart3DTransition,\n\tenableControlsTransition\n};\n","import * as THREE from 'three';\n\nimport * as SCENE from './scene.js';\nimport * as TRANS from './transitions.js';\n\nimport {affineCurveGeometry, curveSurfaceGeometry} from 'math/graphics.js';\n\n/***** State *****/\nvar initialized = false;\nvar view3D = false;\n\n/***** Initialization *****/\nvar renderer;\n\nfunction initializeRenderer() {\n\tconst canvas = document.getElementById('main-view');\n\trenderer = new THREE.WebGLRenderer({\n\t\tcanvas: canvas,\n\t\tantialias: true,\n\t\tlogarithmicDepthBuffer: true\n\t});\n\trenderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);\n\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\twindow.addEventListener('resize', handleResize);\n}\n\nfunction handleResize(e) {\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tSCENE.camera.aspect = window.innerWidth / window.innerHeight;\n\tSCENE.camera.updateProjectionMatrix();\n}\n\nfunction initialize() {\n\tinitializeRenderer();\n\tSCENE.initialize();\n\tTRANS.enableControlsTransition(0, view3D, 0);\n\tinitialized = true;\n}\n\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\trenderer.render(SCENE.scene, SCENE.camera);\n\n\tSCENE.update();\n\tTRANS.runTransitions();\n}\n\n\n/***** Interface *****/\nfunction render() {\n\tinitialize();\n\tanimate();\n}\n\nfunction updateCurve(curve) {\n\tconst curveGeo = affineCurveGeometry(curve.reduced);\n\n\tconst geoA = SCENE.curveLineA.geometry;\n\tconst posA = geoA.attributes.position;\n\tconst geoB = SCENE.curveLineB.geometry;\n\tconst posB = geoB.attributes.position;\n\n\tif (curveGeo.length === 1) {\n\t\tposB.copyArray(curveGeo[0]);\n\t\tSCENE.curveLineA.visible = false;\n\t} else {\n\t\tposA.copyArray(curveGeo[0]);\n\t\tposA.needsUpdate = true;\n\t\tgeoA.computeBoundingSphere();\n\n\t\tposB.copyArray(curveGeo[1]);\n\t\tSCENE.curveLineA.visible = true;\n\t}\n\tposB.needsUpdate = true;\n\tgeoB.computeBoundingSphere();\n\n\tif (view3D) {\n\t\tconst surfaceGeo = SCENE.curveSurface.geometry;\n\t\tconst surfacePos = surfaceGeo.attributes.position;\n\n\t\tconst [index, geoPoints] = curveSurfaceGeometry(curveGeo);\n\t\tsurfaceGeo.setIndex(index);\n\t\tsurfacePos.copyArray(geoPoints);\n\t\tsurfacePos.needsUpdate = true;\n\n\t\tsurfaceGeo.computeBoundingSphere();\n\t\tsurfaceGeo.computeVertexNormals();\n\t}\n\n}\n\nfunction set3D(newView3D) {\n\tif (initialized & (newView3D !== view3D)) {\n\t\tview3D = newView3D;\n\t\tTRANS.start3DTransition(view3D);\n\t}\n}\n\nexport default render;\nexport {updateCurve, set3D};\n","import React, {PureComponent} from 'react';\nimport renderScene, {updateCurve, set3D} from './render.js';\nimport './MainView.css';\n\nclass MainView extends PureComponent {\n\tcomponentDidMount() {\n\t\trenderScene();\n\t\tthis.update();\n\t}\n\n\tupdate() {\n\t\tset3D(this.props.view3D);\n\t\tupdateCurve(this.props.curve);\n\t}\n\n\trender() {\n\t\tthis.update();\n\t\treturn <canvas id='main-view'/>;\n\t}\n}\n\nexport default MainView;\n","import bigInt from 'big-integer';\n\n\nclass BigRational {\n\tconstructor(numerator, denominator=1) {\n\t\tif (numerator instanceof BigRational) {\n\t\t\tthis.n = numerator.n;\n\t\t\tthis.d = numerator.d;\n\t\t} else {\n\t\t\tthis.n = bigInt(numerator);\n\t\t\tthis.d = bigInt(denominator);\n\t\t\tif (this.d.lt(0)) {\n\t\t\t\tthis.d = this.d.abs();\n\t\t\t\tthis.n = bigInt.zero.minus(this.n);\n\t\t\t}\n\t\t\tthis.reduce();\n\t\t}\n\t}\n\n\treduce() {\n\t\tif (this.d.eq(1)) {return;}\n\t\tconst gcd = bigInt.gcd(this.d, this.n);\n\t\tthis.n = this.n.divide(gcd);\n\t\tthis.d = this.d.divide(gcd);\n\t}\n\n\n\t/***** Unary Arithmetic Operators *****/\n\tnegate() {\n\t\treturn new BigRational(bigInt.zero.minus(this.n), this.d);\n\t}\n\n\treciprocal() {\n\t\treturn new BigRational(this.d, this.n);\n\t}\n\n\n\t/***** Binary Arithmetic Operators *****/\n\tplus(other) {\n\t\treturn new BigRational(\n\t\t\tthis.n.times(other.d).plus(this.d.times(other.n)),\n\t\t\tthis.d.times(other.d)\n\t\t);\n\t}\n\n\tminus(other) {\n\t\treturn this.plus(other.negate());\n\t}\n\n\ttimes(other) {\n\t\tother = new BigRational(other);\n\t\treturn new BigRational(this.n.times(other.n), this.d.times(other.d));\n\t}\n\n\tdivide(other) {\n\t\treturn this.times(other.reciprocal());\n\t}\n\n\tpow(other) {\n\t\tif (other === 0) {return new BigRational(1)};\n\t\tif (other < 0) {return this.reciprocal().pow(Math.abs(other))};\n\n\t\t// Construct powers of two for efficiency\n\t\tvar exponent = 0;\n\t\tvar curr = this;\n\t\tconst powers = [curr];\n\n\t\twhile (other > Math.pow(2, exponent)) {\n\t\t\texponent++;\n\t\t\tcurr = curr.times(curr);\n\t\t\tpowers.push(curr);\n\t\t}\n\n\t\t// Compute answer\n\t\tvar answer = new BigRational(1);\n\t\tfor (var i=0; i <= exponent; i++) {\n\t\t\tif ((other >> i) % 2 === 1) {\n\t\t\t\tanswer = answer.times(powers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn answer;\n\t}\n\n\n\t/***** Comparison Operators *****/\n\teq(other) {\n\t\tother = new BigRational(other);\n\t\treturn this.n.eq(other.n) && this.d.eq(other.d);\n\t}\n\n\tgt(other) {\n\t\tother = new BigRational(other);\n\t\treturn this.n.times(other.d).gt(other.n.times(this.d));\n\t}\n\n\tlt(other) {\n\t\treturn other.gt(this);\n\t}\n\n\tgte(other) {return this.gt(other) || this.eq(other);}\n\tlte(other) {return this.lt(other) || this.eq(other);}\n\n\n\t/***** Utility Functions *****/\n\ttoString() {\n\t\tif (this.d.eq(1)) {\n\t\t\treturn this.n.toString();\n\t\t} else {\n\t\t\treturn this.n.toString() + '/' + this.d.toString();\n\t\t}\n\t}\n}\n\nexport default BigRational;\n","import bigInt from 'big-integer';\nimport BigRational from './bigRational.js';\n\n/*\n * Represents the affine map\n *\n * (x, y) -> (\n *     a_x * x + b_x * y + c_x,\n *     a_y * x + b_y * y + c_y\n * ).\n */\nclass AffineMap {\n\t/*\n\t * Coefficients are [a_x, b_x, c_x, a_y, b_y, c_y],\n\t * in that order.\n\t *\n\t * All coefficients are implicitly divided by 'denominator'.\n\t * This allows the use of bigInt arithmetic.\n\t *\n\t * Precondition: denominator is nonzero\n\t */\n\tconstructor(coefficients, denominator=1) {\n\t\tthis.coefficients = coefficients.map((x) => bigInt(x));\n\t\tthis.denominator = bigInt(denominator);\n\t\tif (this.denominator.lt(0)) {\n\t\t\tthis.denominator = this.denominator.abs();\n\t\t\tthis.coefficients = this.coefficients.map((x) => bigInt.zero.minus(x));\n\t\t}\n\t\tthis.reduce();\n\t}\n\t\n\treduce() {\n\t\tvar gcd = this.denominator;\n\n\t\tfor (var coefficient of this.coefficients) {\n\t\t\tgcd = bigInt.gcd(gcd, coefficient);\n\t\t}\n\n\t\tthis.denominator = this.denominator.divide(gcd);\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t\tthis.coefficients[i] = this.coefficients[i].divide(gcd);\n\t\t}\n\t}\n\n\tcompose(other) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst [A, B, C, D, E, F] = other.coefficients\n\n\t\treturn new AffineMap([\n\t\t\ta.times(A).plus(b.times(D)),\n\t\t\ta.times(B).plus(b.times(E)),\n\t\t\ta.times(C).plus(b.times(F)).plus(c.times(other.denominator)),\n\t\t\td.times(A).plus(e.times(D)),\n\t\t\td.times(B).plus(e.times(E)),\n\t\t\td.times(C).plus(e.times(F)).plus(f.times(other.denominator))\n\t\t], this.denominator.times(other.denominator));\n\t}\n\n\tinverse() {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst determinant = a.times(e).minus(b.times(d));\n\t\tconst den = this.denominator;\n\n\t\tconst coefficients = [\n\t\t\te.times(den),\n\t\t\tbigInt.zero.minus(b).times(den),\n\t\t\tb.times(f).minus(c.times(e)),\n\t\t\tbigInt.zero.minus(d).times(den),\n\t\t\ta.times(den),\n\t\t\tc.times(d).minus(a.times(f)),\n\t\t];\n\n\t\treturn new AffineMap(coefficients, determinant);\n\t}\n\n\ttransformFloat(x, y) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients.map(\n\t\t\t(x) => x.toJSNumber()\n\t\t);\n\t\tconst den = this.denominator.toJSNumber();\n\t\treturn [\n\t\t\t(a*x + b*y + c)/den,\n\t\t\t(d*x + e*y + f)/den\n\t\t];\n\t}\n\n\ttransformBigRational(x, y) {\n\t\tconst [a, b, c, d, e, f] = this.coefficients.map(\n\t\t\t(x) => new BigRational(x)\n\t\t);\n\t\tconst den = new BigRational(this.denominator);\n\t\treturn [\n\t\t\ta.times(x).plus(b.times(y)).plus(c).divide(den),\n\t\t\td.times(x).plus(e.times(y)).plus(f).divide(den),\n\t\t];\n\t}\n\n\ttoString() {\n\t\tconst [a, b, c, d, e, f] = this.coefficients;\n\t\tconst D = this.denominator;\n\n\t\tconst mapString = `(x, y) -> (${a}x + ${b}y + ${c}, ${d}x + ${e}y + ${f})`;\n\t\tif (D.eq(1)) {\n\t\t\treturn mapString;\n\t\t} else {\n\t\t\treturn mapString + ' / ' + D.toString();\n\t\t}\n\t}\n}\n\nconst IdentityMap = new AffineMap([1, 0, 0, 0, 1, 0]);\n\nexport default AffineMap;\nexport {IdentityMap};\n","import bigInt from 'big-integer';\n\nimport AffineMap, {IdentityMap} from './affineMap.js';\n\n/*\n * Reduces the given general elliptic curve\n * to the Weierstrass form\n *\n * Y^2 + a_1 XY + a_3 Y = X^3 + a_2 X^2 + a_4 X + a_6.\n *\n * Input is an array of ten BigInts,\n * interpreted as described in App.js.\n *\n * Returns the coefficients [a_i] of the transformed\n * equation and the map (x, y) -> (X, Y).\n */\nfunction reduce1(curve) {\n\t// NOT IMPLEMENTED\n\treturn curve;\n}\n\n\n/*\n * Reduces the given Weierstrass form\n *\n * y^2 + axy + cy = x^3 + bx^2 + dx + e.\n *\n * to the reduced form\n *\n * Y^2 = X^3 + AX^2 + BX + C.\n *\n * Input is an array of five BigInts\n * representing the coefficients [a, b, c, d, e].\n *\n * Returns the coefficients [A, B, C] of the transformed\n * equation and the map (x, y) -> (X, Y).\n */\nfunction reduce2(curve) {\n\tconst [a, b, c, d, e] = curve;\n\tconst coefficients = [\n\t\tb.times(4).plus(a.times(a)),\n\t\td.times(2).plus(a.times(c)).times(8),\n\t\te.times(4).plus(c.times(c)).times(16)\n\t];\n\n\tconst map = new AffineMap([\n\t\t4, 0, 0,\n\t\ta.times(4), 8, c.times(4)\n\t]);\n\treturn [coefficients, map];\n}\n\n/*\n * Reduces the given curve\n *\n * y^2 = x^3 + ax^2 + bx + c\n *\n * to the form\n *\n * Y^2 = X^3 + AX + B.\n *\n * Returns the coefficients [A, B]\n * and the map (x, y) -> (X, Y).\n */\nfunction reduce3(curve) {\n\tconst [a, b, c] = curve;\n\tconst coefficients = [\n\t\tb.times(3).minus(a.times(a)).times(27),\n\t\ta.times(\n\t\t\ta.times(a.times(2)).minus(b.times(9))\n\t\t).plus(c.times(27)).times(27)\n\t]\n\n\tconst map = new AffineMap([\n\t\t9, 0, a.times(3),\n\t\t0, 27, 0\n\t]);\n\treturn [coefficients, map];\n}\n\n/*\n * Reduces the given curve\n *\n * y^2 = x^3 + ax + b\n *\n * to the form\n *\n * Y^2 = X^3 + AX + B\n *\n * with minimal discriminant.\n *\n * Returns the coefficients [A, B]\n * and the map (X, Y) -> (x, y).\n */\nfunction minimize(curve) {\n\tconst [a, b] = curve;\n\n\tif (a.eq(0) && b.eq(0)) {\n\t\tconst map = new AffineMap([\n\t\t\t6, 0, 0,\n\t\t\t0, 1, 0\n\t\t], 216);\n\t\treturn [curve, map];\n\t}\n\n\tvar gcd = bigInt.gcd(a.pow(3), b.pow(2));\n\tvar scale = bigInt.one;\n\n\tvar p = bigInt(2);\n\twhile (p.pow(12).leq(gcd)) {\n\t\tif (gcd.isDivisibleBy(p.pow(12))) {\n\t\t\tgcd = gcd.divide(p.pow(12));\n\t\t\tscale = scale.times(p);\n\t\t} else {\n\t\t\tp = p.plus(1);\n\t\t}\n\t}\n\n\tconst coefficients = [\n\t\ta.divide(scale.pow(4)),\n\t\tb.divide(scale.pow(6))\n\t];\n\n\tconst map = new AffineMap([\n\t\tscale.pow(4), 0, 0,\n\t\t0, scale.pow(3), 0\n\t], scale.pow(6));\n\treturn [coefficients, map];\n}\n\n\n/*\n * Composes the given list of functions.\n */\nfunction compose(functions) {\n\treturn (function(curve) {\n\t\tvar overallMap = IdentityMap;\n\t\tvar map;\n\n\t\tfor (var f of functions) {\n\t\t\t[curve, map] = f(curve);\n\t\t\toverallMap = map.compose(overallMap);\n\t\t}\n\n\t\treturn [curve, overallMap];\n\t});\n}\n\nconst reduceFull = compose([reduce2, reduce3, minimize]);\n\nexport {\n\treduce1,\n\treduce2,\n\treduce3,\n\tminimize\n};\nexport default reduceFull;\n","import bigInt from 'big-integer';\n\n// Precompute small primes\nconst MAX = 300000;\nconst sieve = new Array(MAX).fill(true);\n\nsieve[0] = false;\nsieve[1] = false;\nfor (let i=2; i < Math.sqrt(MAX); i++) {\n\tif (sieve[i]) {\n\t\tfor (let j = i*i; j < MAX; j+= i) {\n\t\t\tsieve[j] = false;\n\t\t}\n\t}\n}\n\nconst small_primes = [];\nfor (let i=2; i < MAX; i++) {\n\tif (sieve[i]) {small_primes.push(bigInt(i));}\n}\n\n/*\n * Factors an integer n.\n *\n * Returns an array of tuples (p_i, e_i),\n * so that n = product(p_i ^ e_i),\n * the p_i are prime,\n * and all e_i > 0.\n *\n * For performance reasons,\n * factorization may be inaccurate\n * if n contains prime divisors\n * with more than 12 digits.\n */\nfunction factor(n) {\n\tn = bigInt(n);\n\tif (n.lt(2)) {\n\t\treturn [];\n\t}\n\n\tconst factorization = [];\n\n\tfor (var prime of small_primes) {\n\t\tvar exponent = 0;\n\t\twhile (n.isDivisibleBy(prime)) {\n\t\t\texponent++;\n\t\t\tn = n.divide(prime);\n\t\t}\n\n\t\tif (exponent > 0) {\n\t\t\tfactorization.push([prime, exponent]);\n\t\t}\n\n\t\tif (prime.pow(2).gt(n)) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (n.gt(1)) {\n\t\tfactorization.push([n, 1]);\n\t}\n\treturn factorization;\n}\n\nexport {factor};\n","import BigRational from './bigRational.js';\n\n/*\n * Represents a rational point on a reduced elliptic curve.\n *\n * The attributes x and y are BigRationals representing\n * the x and y coordinates of the curve.\n *\n * The point at infinity is represented by setting\n * x, y = NaN.\n */\nclass RationalPoint {\n\tconstructor(reducedCurve, x, y) {\n\t\tthis.curve = reducedCurve.reduced;\n\t\tif (Number.isNaN(x)) {\n\t\t\tthis.x = NaN;\n\t\t\tthis.y = NaN;\n\t\t} else {\n\t\t\tthis.x = new BigRational(x);\n\t\t\tthis.y = new BigRational(y);\n\t\t}\n\t}\n\n\tisIdentity() {\n\t\treturn Number.isNaN(this.x);\n\t}\n\n\t/***** Group Operations *****/\n\t// All group operations assume that 'this'\n\t// and 'other' share the same elliptic curve!\n\teq(other) {\n\t\tif (this.isIdentity()) {return other.isIdentity();}\n\t\tif (other.isIdentity()) {return this.isIdentity();}\n\t\treturn this.x.eq(other.x) && this.y.eq(other.y);\n\t}\n\n\tplus(other) {\n\t\t// Check if either argument is identity\n\t\tif (this.isIdentity()) {return other;};\n\t\tif (other.isIdentity()) {return this;};\n\n\t\t// Check if other point is additive inverse\n\t\tif (this.x.eq(other.x) && this.y.negate().eq(other.y)) {\n\t\t\treturn getIdentity(this.curve);\n\t\t}\n\n\t\t// Perform point addition\n\t\tconst [a, b] = this.curve.coefficients.map((x) => new BigRational(x));\n\n\t\t// Construct line through points\n\t\tvar slope;\n\t\tif (this.eq(other)) {\n\t\t\t// Construct tangent line\n\t\t\t// We don't need to worry about 2-torsion points since\n\t\t\t// we already checked for other = this.inverse()\n\t\t\tslope = this.x.pow(2).times(3).plus(a).divide(this.y.times(2));\n\t\t} else {\n\t\t\t// Construct secant line\n\t\t\tslope = other.y.minus(this.y).divide(other.x.minus(this.x));\n\t\t}\n\t\tconst intercept = this.y.minus(slope.times(this.x));\n\n\t\t// Synthetic division to locate third point\n\t\tconst cubic = substitute(a, b, slope, intercept);\n\t\tconst quadratic = syntheticDivide(cubic, this.x)[0];\n\t\tconst linear = syntheticDivide(quadratic, other.x)[0];\n\t\tconst X = linear[0].negate();\n\t\tconst Y = slope.times(X).plus(intercept).negate();\n\t\treturn new RationalPoint(this.curve, X, Y);\n\t}\n\n\tinverse() {\n\t\treturn new RationalPoint(this.curve, this.x, this.y.negate());\n\t}\n\n\tminus(other) {\n\t\treturn this.plus(other.inverse());\n\t}\n\n\t// Integer multiplication (repeated addition)\n\ttimes(other) {\n\t\tif (other === 0) {return getIdentity(this.curve);}\n\t\tif (other < 0) {return this.inverse().times(Math.abs(other));}\n\n\t\t// Construct powers of two for efficiency\n\t\tvar exponent = 0;\n\t\tvar curr = this;\n\t\tconst powers = [curr];\n\n\t\twhile (other > Math.pow(2, exponent)) {\n\t\t\texponent++;\n\t\t\tcurr = curr.plus(curr);\n\t\t\tpowers.push(curr);\n\t\t}\n\n\t\t// Compute answer\n\t\tvar answer = getIdentity(this.curve);\n\t\tfor (var i=0; i<=exponent; i++) {\n\t\t\tif ((other >> i) % 2 === 1) {\n\t\t\t\tanswer = answer.plus(powers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn answer;\n\t}\n\n\t/***** Group Theory *****/\n\torder() {\n\t\tvar curr = this;\n\t\tfor (let i = 1; i <= 12; i++) {\n\t\t\tif (curr.isIdentity()) {\n\t\t\t\tthis.order = () => i;\n\t\t\t\treturn i;\n\t\t\t}\n\t\t\tcurr = curr.plus(this);\n\t\t}\n\t\t\n\t\t// By Mazur's theorem\n\t\tthis.order = () => Infinity;\n\t\treturn Infinity;\n\t}\n\n\n\t/***** Utility Functions *****/\n\ttoString() {\n\t\tif (this.isIdentity()) {\n\t\t\treturn '\\u221E @ ' + this.curve.toString();\n\t\t} else {\n\t\t\treturn '('\n\t\t\t\t+ this.x.toString() + ', '\n\t\t\t\t+ this.y.toString() + ') @ ' + this.curve.toString();\n\t\t}\n\t}\n}\n\nfunction getIdentity(curve) {\n\treturn new RationalPoint(curve, NaN, NaN);\n}\n\n/*\n * Substitutes y = cx + d\n * into the curve y^2 = x^3 + ax + b.\n *\n * Returns [e, f, g] so that the\n * new equation can be written as\n * x^3 + ex^2 + fx + g = 0.\n *\n * All inputs and outputs are BigRationals.\n */\nfunction substitute(a, b, c, d) {\n\treturn [\n\t\tc.pow(2).negate(),\n\t\ta.minus(c.times(d).times(2)),\n\t\tb.minus(d.pow(2))\n\t];\n}\n\n/*\n * Divides the monic polynomial\n * x^{n+1} + a_0 x^n + a_1 x^{n-1} + ... + a_n\n * by x-a.\n *\n * The 'coefficients' array should be an array of BigRationals\n * representing [a_0, ..., a_n].\n * The 'a' argument is a BigRational representing a.\n *\n * Outputs the coefficients of the quotient,\n * and the remainder.\n */\nfunction syntheticDivide(coefficients, a) {\n\tcoefficients = coefficients.map((x) => new BigRational(x));\n\ta = new BigRational(a);\n\tconst output = [];\n\tvar curr = new BigRational(1);\n\n\tfor (var coefficient of coefficients) {\n\t\tcurr = curr.times(a).plus(coefficient);\n\t\toutput.push(curr);\n\t}\n\tconst remainder = output.pop();\n\treturn [output, remainder];\n}\n\n\nexport default RationalPoint;\nexport {getIdentity, substitute, syntheticDivide};\n","import bigInt from 'big-integer';\n\nimport reduceFull from './reduce.js';\nimport {factor} from './numberTheory.js';\nimport {findRoots} from './analysis.js';\nimport RationalPoint from './rationalPoint.js';\n\n\n/*\n * Represents an elliptic curve with equation\n * y^2 + axy + cy = x^3 + bx^2 + dx + e.\n */\nclass Curve {\n\tconstructor(...coefficients) {\n\t\tthis.coefficients = coefficients.map((x) => bigInt(x));\n\t\tthis.computeReduction();\n\t\tthis.computeTorsionPoints();\n\t}\n\n\tcomputeReduction() {\n\t\tconst [curve, map] = reduceFull(this.coefficients);\n\t\tthis.reduced = new ReducedCurve(curve, map);\n\t}\n\n\tcomputeTorsionPoints() {}\n\n\ttoString() {\n\t\tconst [a, b, c, d, e] = this.coefficients;\n\t\treturn 'y\\u00B2 + '\n\t\t\t+ a.toString() + 'xy + '\n\t\t\t+ c.toString() + 'y = x\\u00B3 + '\n\t\t\t+ b.toString() + 'x\\u00B2 + '\n\t\t\t+ d.toString() + 'x + '\n\t\t\t+ e.toString();\n\t}\n}\n\n\n/*\n * Represents an elliptic curve with equation\n * y^2 = x^3 + ax + b.\n */\nclass ReducedCurve extends Curve {\n\tconstructor(coefficients, map) {\n\t\tsuper(...coefficients);\n\t\tthis.map = map;\n\t}\n\n\tcomputeReduction() {\n\t\tthis.reduced = this;\n\t}\n\n\tcomputeDiscriminant() {\n\t\tconst [a, b] = this.coefficients;\n\t\tthis.discriminant = a.pow(3).times(4).plus(\n\t\t\tb.pow(2).times(27)\n\t\t).times(-16);\n\t\tthis.discriminantFactorization = factor(this.discriminant.abs());\n\t}\n\n\tcomputeTorsionPoints() {\n\t\tthis.computeDiscriminant();\n\n\t\tconst candidates = this.getCandidateTorsionPoints().map(\n\t\t\t(p) => new RationalPoint(this, ...p)\n\t\t);\n\n\t\tthis.torsionPoints = [];\n\t\tfor (var p of candidates) {\n\t\t\tif (isFinite(p.order())) {this.torsionPoints.push(p)};\n\t\t}\n\t}\n\n\tgetCandidateTorsionPoints() {\n\t\tconst yCandidates = [bigInt.one];\n\n\t\t// Nagell-Lutz theorem\n\t\tfor (var [prime, exponent] of this.discriminantFactorization) {\n\t\t\tif (prime.eq(2)) {exponent -= 4}; // Reduced discriminant\n\t\t\tif (exponent < 2) {continue;}\n\n\t\t\tconst currentCandidates = [...yCandidates];\n\t\t\tfor (var i=1; 2*i <= exponent; i++) {\n\t\t\t\tconst multiplier = prime.pow(i);\n\t\t\t\tyCandidates.push(...currentCandidates.map(\n\t\t\t\t\t(x) => x.times(multiplier)\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tyCandidates.push(bigInt.zero);\n\n\t\t// Compute possible corresponding x-values\n\t\tconst candidates = [];\n\t\tconst [a, b] = this.coefficients;\n\t\tfor (var y of yCandidates) {\n\t\t\t// Find roots of corresponding cubic\n\t\t\tconst roots = findRoots(\n\t\t\t\ta.toJSNumber(),\n\t\t\t\tb.minus(y.pow(2)).toJSNumber());\n\n\t\t\t// Check if roots are integral solutions\n\t\t\tfor (var x of roots) {\n\t\t\t\tif (Math.abs(x - Math.round(x)) > 1e-5) {continue;}\n\t\t\t\tx = bigInt(Math.round(x));\n\t\t\t\tif (x.pow(3).plus(a.times(x)).plus(b).eq(y.pow(2))) {\n\t\t\t\t\tcandidates.push([x, y]);\n\t\t\t\t\tif (!y.eq(0)) {candidates.push([x, bigInt.zero.minus(y)])};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Point at infinity\n\t\tcandidates.push([NaN, NaN]);\n\t\treturn candidates;\n\t}\n\n\ttoString() {\n\t\tconst [a, b] = this.coefficients;\n\t\treturn 'y\\u00B2 = x\\u00B3 + ' + a.toString() + 'x + ' + b.toString();\n\t}\n}\n\nexport default Curve;\nexport {ReducedCurve};\n","import {createMuiTheme} from '@material-ui/core/styles';\nimport {blue} from '@material-ui/core/colors';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: blue,\n  },\n});\n\nexport default theme;\n","import React, {PureComponent} from 'react';\n\nimport bigInt from 'big-integer';\n\nimport ControlBar from './components/ControlBar/ControlBar.js';\nimport InfoPanel from './components/InfoPanel/InfoPanel.js';\n//import HelpPanel from './components/HelpPanel/HelpPanel.js';\nimport MainView from './components/MainView/MainView.js';\n\nimport Curve from './math/curve.js';\n\nimport 'katex/dist/katex.min.css';\n\nimport {MuiThemeProvider} from '@material-ui/core/styles';\nimport theme from './theme.js';\nimport './App.css';\n\n\n/*\n * curve: An array of six BigInts representing the currently shown elliptic curve.\n *        The array [a_1, a_2, a_3, a_4, a_6] represents\n *        coefficients in the Weierstrass equation\n *        y^2 + a_1 xy + a_3 y = x^3 + a_2 x^2 + a_4 x + a_6.\n */\n\nclass App extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// y^2 = x^3 - x\n\t\tconst initialCurve = [0, 0, 0, -1, 0];\n\n\t\tthis.state = {\n\t\t\tcurve: initialCurve.map((x) => bigInt(x)),\n\t\t\tinfoPanelOpen: window.innerWidth > 800,\n\t\t\tview3D: false,\n\t\t\thelpPanelOpen: false\n\t\t}\n\t}\n\n\ttoggleInfoPanel() {\n\t\tthis.setState({infoPanelOpen: !this.state.infoPanelOpen});\n\t}\n\n\ttoggleHelpPanel() {\n\t\tthis.setState({helpPanelOpen: !this.state.helpPanelOpen});\n\t}\n\n\ttoggle3DView() {\n\t\tthis.setState({view3D: !this.state.view3D});\n\t}\n\n\tsetCoefficient(i, v) {\n\t\tconst curve = this.state.curve;\n\t\tcurve[i] = v;\n\t\tthis.setState({curve: [...curve]});\n\t}\n\n\trender() {\n\t\tconst curve = new Curve(...this.state.curve);\n\t\treturn (\n\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t<ControlBar\n\t\t\t\t\tcurve={curve}\n\t\t\t\t\tsetCoefficient={this.setCoefficient.bind(this)}\n\n\t\t\t\t\thandleMenuButton={this.toggleInfoPanel.bind(this)}\n\t\t\t\t\thandleHelpButton={this.toggleHelpPanel.bind(this)}\n\n\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\thandle3DSwitch={this.toggle3DView.bind(this)}\n\t\t\t\t/>\n\t\t\t\t<div className='content'>\n\t\t\t\t\t<InfoPanel\n\t\t\t\t\t\tcurve={curve}\n\t\t\t\t\t\topen={this.state.infoPanelOpen}\n\t\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\t/>\n\t\t\t\t\t<MainView\n\t\t\t\t\t\tcurve={curve}\n\t\t\t\t\t\tview3D={this.state.view3D}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</MuiThemeProvider>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}